(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{28253:function(e,t,s){Promise.resolve().then(s.bind(s,32753))},32753:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eA}});var a=s(14297),i=s(13812);let l="/InsightSuite";function n(e){let t=e.startsWith("/")?e:"/".concat(e);return"".concat(l).concat(t)}var r=s(2338),c=s(57441),o=s(96321);let d={selectedProject:"airbnb",projectData:null,isLoading:!1,error:null,selectedClusterId:null,compareSet:new Set,showFilters:!1,searchQuery:""},m=(0,o.Ue)((e,t)=>({...d,setSelectedProject:t=>{e({selectedProject:t,selectedClusterId:null,compareSet:new Set,error:null})},setProjectData:t=>{e({projectData:t,error:null})},setIsLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t,isLoading:!1})},setSelectedClusterId:t=>{e({selectedClusterId:t})},toggleCompareCluster:s=>{let{compareSet:a}=t(),i=new Set(a);i.has(s)?i.delete(s):i.size<5&&i.add(s),e({compareSet:i})},clearCompareSet:()=>{e({compareSet:new Set})},setShowFilters:t=>{e({showFilters:t})},setSearchQuery:t=>{e({searchQuery:t})},reset:()=>{e(d)}}));var u=s(6869),x=s(68977),h=s(33317);function p(e){let{clusters:t}=e,{setSelectedClusterId:s}=m(),l=i.useMemo(()=>{if(!t||!Array.isArray(t)||0===t.length)return[];let e=t.filter(e=>e&&"number"==typeof e.share&&e.label&&e.id);if(0===e.length)return[];let s=[...e].sort((e,t)=>(t.share||0)-(e.share||0)),a=[],i=[],l=0;for(let e of s)e.share>=.02?a.push({name:e.label.length>28?e.label.substring(0,25)+"...":e.label,fullName:e.label,size:Math.max(1,Math.round(1e3*e.share)),sentiment:e.sentiment||0,id:e.id,share:e.share,keywords:(e.keywords||[]).slice(0,3)}):(i.push(e),l+=e.share);return i.length>0&&a.push({name:"Altri temi",fullName:"".concat(i.length," temi minori"),size:Math.max(1,Math.round(1e3*l)),sentiment:0,id:"altri",share:l,keywords:["vari","minori"]}),a},[t]);return l&&0!==l.length?(0,a.jsx)("div",{className:"h-[500px] w-full relative",children:(0,a.jsx)(u.h,{width:"100%",height:"100%",children:(0,a.jsx)(x.W,{data:l,dataKey:"size",stroke:"#27272a",isAnimationActive:!1,onClick:e=>{e&&e.id&&"altri"!==e.id&&s(e.id)},content:(0,a.jsx)(g,{}),children:(0,a.jsx)(h.u,{cursor:{stroke:"#60a5fa",strokeWidth:2,strokeDasharray:"4 4"},content:e=>{var t;let{payload:s}=e,i=null==s?void 0:null===(t=s[0])||void 0===t?void 0:t.payload;return i?(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"rounded-xl border border-neutral-700 bg-neutral-900/95 backdrop-blur-sm px-4 py-3 shadow-xl",children:[(0,a.jsx)("div",{className:"font-semibold text-white mb-1",children:i.fullName||"Senza nome"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"text-neutral-300",children:["Share: ",(0,a.jsxs)("span",{className:"text-white font-medium",children:[(100*(i.share||0)).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-neutral-300",children:["Sentiment: ",(0,a.jsxs)("span",{className:"font-medium ".concat(i.sentiment>.3?"text-green-400":i.sentiment<-.3?"text-red-400":"text-neutral-400"),children:[i.sentiment>0?"+":"",(i.sentiment||0).toFixed(2)]})]}),i.keywords&&i.keywords.length>0&&(0,a.jsxs)("div",{className:"text-neutral-300",children:["Keywords: ",(0,a.jsx)("span",{className:"text-neutral-100",children:i.keywords.join(", ")})]})]}),"altri"!==i.id&&(0,a.jsx)("div",{className:"text-xs text-blue-400 mt-2",children:"Click per dettagli →"})]}):null}})})})}):(0,a.jsx)("div",{className:"h-[500px] w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-neutral-500 mb-2",children:"Nessun dato disponibile"}),(0,a.jsx)("div",{className:"text-sm text-neutral-600",children:"I temi verranno visualizzati qui quando disponibili"})]})})}function g(e){let{x:t,y:s,width:l,height:n,name:r,sentiment:c=0,id:o,share:d}=e;if(!l||!n||l<20||n<20)return null;let m=i.useMemo(()=>{let e,t,s;return c>.3?(e="#22c55e",t="#ffffff",s="#15803d"):c<-.3?(e="#f87171",t="#ffffff",s="#dc2626"):(e="#64748b",t="#ffffff",s="#475569"),{bgColor:e,textColor:t,borderColor:s}},[c]),u=i.useMemo(()=>{let e=l*n;return e>2e4?16:e>1e4?14:e>5e3?12:e>2e3?11:10},[l,n]),x=l>100&&n>80,h=l>60&&n>40,p=l>80&&n>60,g="gradient-".concat(o,"-").concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("g",{children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:g,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",style:{stopColor:m.bgColor,stopOpacity:1}}),(0,a.jsx)("stop",{offset:"100%",style:{stopColor:m.borderColor,stopOpacity:1}})]})}),(0,a.jsx)("rect",{x:t,y:s,width:l,height:n,fill:"url(#".concat(g,")"),stroke:m.borderColor,strokeWidth:1.5,rx:6,className:"cursor-pointer transition-all duration-200",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}}),(0,a.jsx)("rect",{x:t,y:s,width:l,height:n,fill:"white",fillOpacity:0,className:"hover:fillOpacity-10 transition-all duration-200",rx:6}),h&&(0,a.jsx)("foreignObject",{x:t,y:s,width:l,height:n,children:(0,a.jsx)("div",{className:"h-full w-full flex flex-col items-center justify-center p-2 pointer-events-none",children:(0,a.jsxs)("div",{className:"text-center",style:{color:m.textColor,fontSize:"".concat(u,"px"),fontWeight:600,lineHeight:1.2,textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:[(0,a.jsx)("div",{className:"truncate px-1",style:{maxWidth:l-8},children:r||""}),p&&d&&(0,a.jsxs)("div",{className:"mt-1",style:{fontSize:"".concat(u-2,"px"),opacity:.9},children:[(100*d).toFixed(1),"%"]}),x&&(0,a.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-1",style:{fontSize:"".concat(u-3,"px")},children:[c>.3&&(0,a.jsx)("span",{children:"↑"}),c<-.3&&(0,a.jsx)("span",{children:"↓"}),c>=-.3&&c<=.3&&(0,a.jsx)("span",{children:"→"}),(0,a.jsxs)("span",{children:[c>0?"+":"",c.toFixed(2)]})]})]})})}),(0,a.jsx)("rect",{x:t,y:s,width:l,height:n,fill:"transparent",stroke:"white",strokeWidth:2,strokeOpacity:0,rx:6,className:"hover:strokeOpacity-60 transition-all duration-200",style:{pointerEvents:"altri"===o?"none":"auto"}})]})}var v=s(44164),j=s(15598),b=s(11053),f=s(4472),w=s(80361),N=s(14170),y=s(29740);function S(e){let{clusters:t}=e,{setSelectedClusterId:s}=m(),{data:l,xSplit:n,ySplit:c}=i.useMemo(()=>{let e=[...t.map(e=>{let t=Math.max(0,-e.sentiment);return{id:e.id,name:e.label,x:Math.max(0,Math.min(1,t)),y:Math.max(0,Math.min(1,e.share)),z:10*Math.sqrt(e.size),sentiment:e.sentiment,cluster:e}})];for(let t=0;t<50;t++){let t=!1;for(let s=0;s<e.length;s++)for(let a=s+1;a<e.length;a++){let i=e[s].x-e[a].x,l=e[s].y-e[a].y,n=Math.sqrt(i*i+l*l);if(n<.035&&n>0){t=!0;let r=(.035-n)/n*.5,c=i*r,o=l*r;e[s].x=Math.max(0,Math.min(1,e[s].x+c)),e[s].y=Math.max(0,Math.min(1,e[s].y+o)),e[a].x=Math.max(0,Math.min(1,e[a].x-c)),e[a].y=Math.max(0,Math.min(1,e[a].y-o))}}if(!t)break}let s=e.map(e=>e.x).sort((e,t)=>e-t),a=e.map(e=>e.y).sort((e,t)=>e-t),i=(e,t)=>{let s=(e.length-1)*t,a=Math.floor(s);return void 0!==e[a+1]?e[a]+(s-a)*(e[a+1]-e[a]):e[a]};return{data:e,xSplit:Math.max(.35,i(s,.6)),ySplit:Math.max(.2,i(a,.6))}},[t]),o=(e,t)=>t>=c?e<n?"Q1":"Q2":e<n?"Q3":"Q4";return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"h-[420px] w-full relative",children:[(0,a.jsxs)("div",{className:"insightsuite-quadrants",children:[(0,a.jsx)("div",{className:"insightsuite-q1"}),(0,a.jsx)("div",{className:"insightsuite-q2"}),(0,a.jsx)("div",{className:"insightsuite-q3"}),(0,a.jsx)("div",{className:"insightsuite-q4"})]}),(0,a.jsx)(u.h,{width:"100%",height:"100%",children:(0,a.jsxs)(v.G,{margin:{top:20,right:20,bottom:40,left:40},children:[(0,a.jsx)(j.q,{stroke:"#27272a",strokeDasharray:"3 3",strokeOpacity:.5}),(0,a.jsx)(b.K,{type:"number",dataKey:"x",domain:[0,1],tickFormatter:e=>"".concat((100*e).toFixed(0),"%"),tick:{fill:"#a3a3a3",fontSize:11},label:{value:"Criticit\xe0 (% Negativit\xe0)",position:"insideBottom",offset:-5,fill:"#737373",fontSize:12}}),(0,a.jsx)(f.B,{type:"number",dataKey:"y",domain:[0,1],tickFormatter:e=>"".concat((100*e).toFixed(0),"%"),tick:{fill:"#a3a3a3",fontSize:11},label:{value:"Rilevanza (Share)",angle:-90,position:"insideLeft",fill:"#737373",fontSize:12}}),(0,a.jsx)(w.d,{x:n,stroke:"#525252",strokeDasharray:"5 5",strokeOpacity:.5}),(0,a.jsx)(w.d,{y:c,stroke:"#525252",strokeDasharray:"5 5",strokeOpacity:.5}),(0,a.jsx)(h.u,{cursor:{strokeDasharray:"3 3",stroke:"#60a5fa"},content:(0,a.jsx)(e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=s[0].payload,t=o(e.x,e.y),i={Q1:{label:"Quick Wins",color:"text-green-400"},Q2:{label:"Must Fix",color:"text-red-400"},Q3:{label:"Osservare",color:"text-neutral-400"},Q4:{label:"Strategici",color:"text-amber-400"}};return(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"rounded-xl border border-neutral-700 bg-neutral-900/95 backdrop-blur-sm px-4 py-3 shadow-xl",children:[(0,a.jsx)("div",{className:"font-semibold text-white mb-2",children:e.name}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"text-neutral-300",children:["Quadrante: ",(0,a.jsx)("span",{className:"font-medium ".concat(i[t].color),children:i[t].label})]}),(0,a.jsxs)("div",{className:"text-neutral-300",children:["Share: ",(0,a.jsxs)("span",{className:"text-white font-medium",children:[(100*e.y).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-neutral-300",children:["Negativit\xe0: ",(0,a.jsxs)("span",{className:"text-white font-medium",children:[(100*e.x).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-neutral-300",children:["Sentiment: ",(0,a.jsxs)("span",{className:"font-medium ".concat(e.sentiment>.3?"text-green-400":e.sentiment<-.3?"text-red-400":"text-neutral-400"),children:[e.sentiment>0?"+":"",e.sentiment.toFixed(2)]})]})]}),(0,a.jsx)("div",{className:"text-xs text-blue-400 mt-2",children:"Click per analizzare →"})]})}return null},{})}),(0,a.jsx)(N.b,{data:l,fill:"#60a5fa",onClick:e=>{e&&e.id&&s(e.id)},children:l.map((e,t)=>{let s=l.filter(t=>t.id!==e.id&&.08>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))).length;return(0,a.jsx)(y.b,{fill:function(e){let t=Math.max(-1,Math.min(1,e));if(t>.3){let e=(t-.3)/.7;return"hsl(142, ".concat(50+26*e,"%, ").concat(36+10*e,"%)")}if(!(t<-.3))return"hsl(240, 5%, 64%)";{let e=(Math.abs(t)-.3)/.7;return"hsl(0, ".concat(60+24*e,"%, ").concat(50+10*e,"%)")}}(e.sentiment),fillOpacity:.9,stroke:"#ffffff",strokeWidth:Math.max(2,2+.5*s),strokeOpacity:.8,className:"cursor-pointer hover:fillOpacity-100 transition-all duration-200",style:{filter:"drop-shadow(0 4px 8px rgba(0,0,0,".concat(Math.max(.4,.4+.2*s),"))")}},"cell-".concat(t))})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4 text-xs",children:[(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-green-500/10 border border-green-500/20",children:[(0,a.jsx)("div",{className:"font-semibold text-green-400 mb-1",children:"Quick Wins"}),(0,a.jsx)("div",{className:"insightsuite-muted",children:"Alto impatto, facile fix"})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-red-500/10 border border-red-500/20",children:[(0,a.jsx)("div",{className:"font-semibold text-red-400 mb-1",children:"Must Fix"}),(0,a.jsx)("div",{className:"insightsuite-muted",children:"Criticit\xe0 urgenti"})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-neutral-500/10 border border-neutral-500/20",children:[(0,a.jsx)("div",{className:"font-semibold text-neutral-300 mb-1",children:"Osservare"}),(0,a.jsx)("div",{className:"insightsuite-muted",children:"Basso impatto"})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[(0,a.jsx)("div",{className:"font-semibold text-amber-400 mb-1",children:"Strategici"}),(0,a.jsx)("div",{className:"insightsuite-muted",children:"Alta negativit\xe0"})]})]})]})}var k=s(66849),C=s(37818),E=s(4051),z=s(60065),T=s(82478),M=s(32956),A=s(81224),I=s(47954),F=s(29092),P=s(20115),D=s(20730),L=s(2070),R=s(93493);function Z(e){let{persona:t,index:s=0}=e,i=["from-blue-600/20 via-blue-500/10 to-transparent","from-emerald-600/20 via-emerald-500/10 to-transparent","from-amber-600/20 via-amber-500/10 to-transparent","from-purple-600/20 via-purple-500/10 to-transparent","from-rose-600/20 via-rose-500/10 to-transparent"],l=i[s%i.length],n=["text-blue-400","text-emerald-400","text-amber-400","text-purple-400","text-rose-400"],c=n[s%n.length],o=e=>{let t=e.toLowerCase();return t.includes("email")?(0,a.jsx)(A.Z,{className:"w-3 h-3"}):t.includes("phone")||t.includes("call")?(0,a.jsx)(I.Z,{className:"w-3 h-3"}):t.includes("mobile")||t.includes("app")?(0,a.jsx)(F.Z,{className:"w-3 h-3"}):t.includes("web")||t.includes("online")?(0,a.jsx)(P.Z,{className:"w-3 h-3"}):null};return(0,a.jsxs)(r.E.div,{className:"insightsuite-card relative overflow-hidden bg-gradient-to-br ".concat(l," h-full min-h-[450px] flex flex-col"),whileHover:{y:-4},transition:{type:"spring",stiffness:300,damping:20},children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/5 to-transparent rounded-full -mr-16 -mt-16"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-white/5 to-transparent rounded-full -ml-12 -mb-12"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,a.jsx)(r.E.div,{className:"p-2.5 rounded-xl bg-neutral-800/50 backdrop-blur-sm ".concat(c),whileHover:{rotate:360},transition:{duration:.5},children:(()=>{let e=t.name.toLowerCase(),s=t.goals.join(" ").toLowerCase();return e.includes("business")||s.includes("work")||s.includes("meeting")?(0,a.jsx)(k.Z,{className:"w-5 h-5"}):e.includes("family")||s.includes("children")||s.includes("kids")?(0,a.jsx)(C.Z,{className:"w-5 h-5"}):e.includes("budget")||s.includes("saving")||s.includes("cheap")?(0,a.jsx)(E.Z,{className:"w-5 h-5"}):e.includes("travel")||s.includes("backpack")||s.includes("solo")?(0,a.jsx)(z.Z,{className:"w-5 h-5"}):e.includes("quality")||s.includes("premium")?(0,a.jsx)(T.Z,{className:"w-5 h-5"}):(0,a.jsx)(M.Z,{className:"w-5 h-5"})})()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:t.name}),(0,a.jsxs)("div",{className:"text-sm insightsuite-muted",children:[(100*t.share).toFixed(0),"% degli utenti"]})]})]}),t.goals.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Obiettivi"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:t.goals.slice(0,5).map((e,t)=>(0,a.jsx)(r.E.span,{className:"badge",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t},whileHover:{scale:1.05},children:e},t))})]}),t.pains.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 text-red-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Pain Points"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:t.pains.slice(0,5).map((e,t)=>(0,a.jsx)(r.E.span,{className:"badge",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t},whileHover:{scale:1.05},children:e},t))})]}),t.quotes.length>0&&(0,a.jsxs)("div",{className:"mb-3 flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,a.jsx)(R.Z,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Citazioni Tipiche"})]}),(0,a.jsx)("div",{className:"space-y-1.5",children:t.quotes.slice(0,3).map((e,t)=>(0,a.jsxs)(r.E.div,{className:"text-xs italic text-neutral-300 bg-neutral-900/50 backdrop-blur-sm rounded-lg px-3 py-2 border border-neutral-800/50",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},children:['"',e,'"']},t))})]}),t.channels.length>0&&(0,a.jsxs)("div",{className:"mt-auto pt-3",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-neutral-400 mb-1.5 block",children:"Canali Preferiti"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:t.channels.slice(0,4).map((e,t)=>(0,a.jsxs)(r.E.span,{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-neutral-800/50 text-xs text-neutral-300 border border-neutral-700/50",whileHover:{scale:1.05},children:[o(e),e]},t))})]})]})]})}var O=s(31879),H=s(65894),q=s(76408),_=s(7572),W=s(91762),Q=s(48086),B=s(94576),U=s(57914),K=s(20607),V=s(23757);let G={en:{"app.name":"InsightSuite","app.loading":"Loading...","app.error":"Error loading data","header.project":"Project: {{name}} • Source: {{source}}","header.themeToggle":"Toggle theme","header.languageToggle":"Change language","datasets.airbnb":"Airbnb","datasets.mobile":"Mobile App","datasets.ecommerce":"E-Commerce","kpi.totalReviews":"Total Reviews","kpi.clustersIdentified":"{{n}} clusters identified","kpi.avgSentiment":"Avg Sentiment","kpi.avgScale":"Scale -1 to +1","kpi.personas":"Personas","kpi.segments":"User segments","kpi.topThemes":"Top Themes","charts.themesMap":"Themes Distribution","charts.themesLegend":"Size = volume • Color = sentiment","charts.opportunityMatrix":"Opportunity Matrix","charts.trends.title":"Temporal Trends","charts.trends.sentimentOverTime":"Sentiment Over Time","charts.trends.volumeOverTime":"Review Volume","charts.trends.topClusterTrends":"Top Themes Evolution","matrix.quickWins":"Quick Wins","matrix.mustFix":"Must Fix","matrix.monitor":"Monitor","matrix.strategic":"Strategic","matrix.quickWinsDesc":"High impact, easy fix","matrix.mustFixDesc":"Critical issues","matrix.monitorDesc":"Low impact","matrix.strategicDesc":"High negativity","personas.title":"User Personas","personas.goals":"Goals","personas.painPoints":"Pain Points","personas.quotes":"Typical Quotes","personas.channels":"Preferred Channels","personas.share":"{{share}}% of users","reviews.title":"Review Explorer","reviews.search":"Search in text...","reviews.filters":"Filters","reviews.showing":"Showing {{current}} of {{total}} reviews","reviews.noResults":"No reviews found","reviews.clearFilters":"Clear filters","reviews.cluster":"Cluster","reviews.allClusters":"All clusters","reviews.language":"Language","reviews.allLanguages":"All languages","reviews.rating":"Rating","reviews.allRatings":"All ratings","reviews.sortBy":"Sort by","reviews.date":"Date","reviews.sentiment":"Sentiment","reviews.newest":"Newest first","reviews.oldest":"Oldest first","reviews.highSentiment":"Positive first","reviews.lowSentiment":"Negative first","reviews.highRating":"High rating","reviews.lowRating":"Low rating","reviews.reset":"Reset","reviews.viewCluster":"View cluster","reviews.text":"Text","reviews.actions":"Actions","reviews.loading":"Loading reviews...","reviews.error":"Failed to load reviews","reviews.retry":"Retry","reviews.page":"Page {{current}} of {{total}}","reviews.columns.text":"Text","reviews.columns.cluster":"Cluster","reviews.columns.sentiment":"Sent.","reviews.columns.language":"Lang","reviews.columns.rating":"Rating","reviews.columns.date":"Date","reviews.columns.actions":"Actions","chat.title":"AI Assistant","chat.subtitle":"Analyze data with artificial intelligence","chat.placeholder":"Ask a question...","chat.emptyState":"Ask me anything about the project data","chat.hint":"Use the suggestions above to start","chat.you":"You","chat.assistant":"Assistant","chat.send":"Send","prompts.declining":"Which clusters are declining over time?","prompts.critical":"Show me the 3 most critical themes","prompts.drivers":"What drives negative sentiment?","prompts.actions":"Suggest priority actions","cluster.reviews":"reviews","cluster.share":"share","cluster.opportunity":"Opportunity","cluster.trend":"Trend","cluster.temporalTrend":"Temporal Trend","cluster.keywords":"Keywords","cluster.aiSummary":"AI Summary","cluster.strengths":"Strengths","cluster.weaknesses":"Critical Issues","cluster.representativeQuotes":"Representative Quotes","cluster.exportReport":"Export Report","cluster.addToStoryboard":"Add to Storyboard","methodology.title":"Methodology & Attribution","methodology.subtitle":"How InsightSuite works","methodology.dataCollection":"Data Collection & Processing","methodology.aiAnalysis":"AI-Powered Analysis","methodology.privacy":"Privacy & Ethics","methodology.techStack":"Tech Stack","methodology.datasetAttribution":"Dataset Attribution","methodology.demoNote":"This is a demo with public data. In production, InsightSuite integrates with your business data sources while respecting all privacy and compliance requirements.","common.close":"Close","common.copied":"Copied!","common.noData":"No data available","common.noDataDesc":"Data will appear here when available"},it:{"app.name":"InsightSuite","app.loading":"Caricamento...","app.error":"Errore nel caricamento dei dati","header.project":"Progetto: {{name}} • Fonte: {{source}}","header.themeToggle":"Cambia tema","header.languageToggle":"Cambia lingua","datasets.airbnb":"Airbnb","datasets.mobile":"App Mobile","datasets.ecommerce":"E-Commerce","kpi.totalReviews":"Recensioni Totali","kpi.clustersIdentified":"{{n}} cluster identificati","kpi.avgSentiment":"Sentiment Medio","kpi.avgScale":"Scala da -1 a +1","kpi.personas":"Personas","kpi.segments":"Segmenti utente","kpi.topThemes":"Temi Principali","charts.themesMap":"Distribuzione Temi","charts.themesLegend":"Dimensione = volume • Colore = sentiment","charts.opportunityMatrix":"Matrice Opportunit\xe0","charts.trends.title":"Trend Temporali","charts.trends.sentimentOverTime":"Sentiment nel Tempo","charts.trends.volumeOverTime":"Volume Recensioni","charts.trends.topClusterTrends":"Evoluzione Temi Principali","matrix.quickWins":"Quick Wins","matrix.mustFix":"Must Fix","matrix.monitor":"Osservare","matrix.strategic":"Strategici","matrix.quickWinsDesc":"Alto impatto, facile fix","matrix.mustFixDesc":"Criticit\xe0 urgenti","matrix.monitorDesc":"Basso impatto","matrix.strategicDesc":"Alta negativit\xe0","personas.title":"Personas Utente","personas.goals":"Obiettivi","personas.painPoints":"Pain Points","personas.quotes":"Citazioni Tipiche","personas.channels":"Canali Preferiti","personas.share":"{{share}}% degli utenti","reviews.title":"Esplora Recensioni","reviews.search":"Cerca nel testo...","reviews.filters":"Filtri","reviews.showing":"Mostrando {{current}} di {{total}} recensioni","reviews.noResults":"Nessuna recensione trovata","reviews.clearFilters":"Rimuovi filtri","reviews.cluster":"Cluster","reviews.allClusters":"Tutti i cluster","reviews.language":"Lingua","reviews.allLanguages":"Tutte le lingue","reviews.rating":"Valutazione","reviews.allRatings":"Tutte le valutazioni","reviews.sortBy":"Ordina per","reviews.date":"Data","reviews.sentiment":"Sentiment","reviews.newest":"Pi\xf9 recenti","reviews.oldest":"Meno recenti","reviews.highSentiment":"Pi\xf9 positivi","reviews.lowSentiment":"Pi\xf9 negativi","reviews.highRating":"Valutazione alta","reviews.lowRating":"Valutazione bassa","reviews.reset":"Reset","reviews.viewCluster":"Vai al cluster","reviews.text":"Testo","reviews.actions":"Azioni","reviews.loading":"Caricamento recensioni...","reviews.error":"Errore nel caricamento","reviews.retry":"Riprova","reviews.page":"Pagina {{current}} di {{total}}","reviews.columns.text":"Testo","reviews.columns.cluster":"Cluster","reviews.columns.sentiment":"Sent.","reviews.columns.language":"Lingua","reviews.columns.rating":"Voto","reviews.columns.date":"Data","reviews.columns.actions":"Azioni","chat.title":"Assistente AI","chat.subtitle":"Analizza i dati con l'intelligenza artificiale","chat.placeholder":"Scrivi una domanda...","chat.emptyState":"Chiedimi qualsiasi cosa sui dati del progetto","chat.hint":"Usa i suggerimenti sopra per iniziare","chat.you":"Tu","chat.assistant":"Assistente","chat.send":"Invia","prompts.declining":"Quali cluster stanno peggiorando nel tempo?","prompts.critical":"Mostrami i 3 temi pi\xf9 critici","prompts.drivers":"Quali sono i driver del sentiment negativo?","prompts.actions":"Suggerisci azioni prioritarie","cluster.reviews":"recensioni","cluster.share":"quota","cluster.opportunity":"Opportunit\xe0","cluster.trend":"Trend","cluster.temporalTrend":"Trend Temporale","cluster.keywords":"Parole Chiave","cluster.aiSummary":"Riassunto AI","cluster.strengths":"Punti di Forza","cluster.weaknesses":"Criticit\xe0","cluster.representativeQuotes":"Citazioni Rappresentative","cluster.exportReport":"Esporta Report","cluster.addToStoryboard":"Aggiungi a Storyboard","methodology.title":"Metodologia & Attribution","methodology.subtitle":"Come funziona InsightSuite","methodology.dataCollection":"Raccolta e Elaborazione Dati","methodology.aiAnalysis":"Analisi con AI","methodology.privacy":"Privacy ed Etica","methodology.techStack":"Stack Tecnologico","methodology.datasetAttribution":"Attribution Dataset","methodology.demoNote":"Questa \xe8 una demo con dati pubblici. In produzione, InsightSuite si integra con le tue fonti dati aziendali rispettando tutti i requisiti di privacy e compliance.","common.close":"Chiudi","common.copied":"Copiato!","common.noData":"Nessun dato disponibile","common.noDataDesc":"I dati verranno visualizzati qui quando disponibili"}},Y=(0,o.Ue)()((0,V.tJ)(e=>({locale:"it",setLocale:t=>e({locale:t})}),{name:"insightsuite-locale"}));function J(){let{locale:e,setLocale:t}=Y(),s=i.useCallback((t,s)=>{let a=G[e][t]||t;return s&&Object.entries(s).forEach(e=>{let[t,s]=e;a=a.replace(RegExp("{{".concat(t,"}}"),"g"),String(s))}),a},[e]);return{locale:e,setLocale:t,t:s}}function $(e){let{data:t,clusters:s=[],title:n}=e,{setSelectedClusterId:o,selectedProject:d}=m(),{t:u}=J(),[x,h]=i.useState(""),[p,g]=i.useState("all"),[v,j]=i.useState("all"),[b,f]=i.useState("all"),[w,N]=i.useState(!1),[y,S]=i.useState("date"),[k,C]=i.useState("desc"),[E,z]=i.useState(1),[T]=i.useState(10),[M,A]=i.useState(null),[I,F]=i.useState(!1),[D,R]=i.useState(null);i.useEffect(()=>{let e=async()=>{F(!0),R(null);try{let e=new URLSearchParams({projectId:d,page:E.toString(),pageSize:T.toString(),sort:y,order:k});x&&e.append("q",x),"all"!==p&&e.append("clusterId",p),"all"!==v&&e.append("lang",v),"all"!==b&&(e.append("ratingMin",b),e.append("ratingMax",b));let t=await fetch(function(e){let t=e.startsWith("/")?e:"/".concat(e);return window.location.hostname.includes("vercel.app")?t:"".concat(l).concat(t)}("/api/reviews?".concat(e.toString())),{cache:"no-store"});if(!t.ok)throw Error("Error: ".concat(t.status));let s=await t.json();A(s)}catch(e){console.error("Error fetching reviews:",e),R("Failed to load reviews. Please try again."),A({total:0,page:E,pageSize:T,items:[]})}finally{F(!1)}},t=setTimeout(()=>{e()},x?300:0);return()=>clearTimeout(t)},[d,E,T,x,p,v,b,y,k]);let Z=i.useMemo(()=>M?Array.from(new Set(M.items.map(e=>e.lang).filter(Boolean))).sort():[],[M]),V=e=>{e&&o(e)},G=e=>e>.3?(0,a.jsx)(O.Z,{className:"w-3 h-3 text-green-400"}):e<-.3?(0,a.jsx)(H.Z,{className:"w-3 h-3 text-red-400"}):null,Y=()=>{h(""),g("all"),j("all"),f("all"),z(1)},$=["all"!==p,"all"!==v,"all"!==b,""!==x].filter(Boolean).length,X=M?Math.ceil(M.total/T):1;return(0,a.jsxs)(r.E.div,{className:"insightsuite-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[(0,a.jsx)("h2",{className:"title-lg",children:n||u("reviews.title")}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:flex-initial",children:[(0,a.jsx)(q.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutral-500 pointer-events-none"}),(0,a.jsx)("input",{value:x,onChange:e=>{h(e.target.value),z(1)},placeholder:u("reviews.search"),className:"input-field w-full sm:w-72",style:{paddingLeft:"2.5rem",paddingRight:"1rem"}})]}),(0,a.jsxs)(r.E.button,{onClick:()=>N(!w),className:"btn-secondary relative ".concat(w?"bg-neutral-700":""),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline ml-2",children:u("reviews.filters")}),$>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-600 text-white text-xs rounded-full flex items-center justify-center",children:$})]})]})]}),(0,a.jsx)(c.M,{children:w&&(0,a.jsx)(r.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 mb-4 p-4 bg-neutral-800/30 rounded-xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-neutral-400 mb-1 block",children:"Cluster"}),(0,a.jsxs)("select",{value:p,onChange:e=>{g(e.target.value),z(1)},className:"input-field w-full text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All clusters"}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.label||"No name"},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-neutral-400 mb-1 block",children:"Language"}),(0,a.jsxs)("select",{value:v,onChange:e=>{j(e.target.value),z(1)},className:"input-field w-full text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All languages"}),Z.map(e=>(0,a.jsx)("option",{value:e,children:e.toUpperCase()},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-neutral-400 mb-1 block",children:"Rating"}),(0,a.jsxs)("select",{value:b,onChange:e=>{f(e.target.value),z(1)},className:"input-field w-full text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All ratings"}),[5,4,3,2,1].map(e=>(0,a.jsxs)("option",{value:e,children:["⭐".repeat(e)," (",e,")"]},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-neutral-400 mb-1 block",children:"Sort by"}),(0,a.jsxs)("select",{value:"".concat(y,"_").concat(k),onChange:e=>{let[t,s]=e.target.value.split("_");S(t),C(s),z(1)},className:"input-field w-full text-sm",children:[(0,a.jsx)("option",{value:"date_desc",children:"Date (newest)"}),(0,a.jsx)("option",{value:"date_asc",children:"Date (oldest)"}),(0,a.jsx)("option",{value:"sentiment_desc",children:"Sentiment (high)"}),(0,a.jsx)("option",{value:"sentiment_asc",children:"Sentiment (low)"}),(0,a.jsx)("option",{value:"rating_desc",children:"Rating (high)"}),(0,a.jsx)("option",{value:"rating_asc",children:"Rating (low)"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)(r.E.button,{onClick:Y,className:"btn-ghost w-full justify-center",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(W.Z,{className:"w-4 h-4 mr-2"}),"Reset"]})})]})})}),M&&(0,a.jsx)("div",{className:"text-sm text-neutral-500 mb-3",children:u("reviews.showing",{current:M.items.length,total:M.total})}),(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl border border-neutral-800",children:I?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(Q.Z,{className:"w-8 h-8 animate-spin mx-auto mb-2 text-blue-400"}),(0,a.jsx)("div",{className:"text-neutral-500",children:u("reviews.loading")})]}):D?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(L.Z,{className:"w-8 h-8 mx-auto mb-2 text-red-400"}),(0,a.jsx)("div",{className:"text-neutral-500 mb-2",children:u("reviews.error")}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-secondary",children:u("reviews.retry")})]}):M&&0!==M.items.length?(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 bg-neutral-800/90 backdrop-blur-sm border-b border-neutral-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 font-medium",children:u("reviews.columns.text")}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium",children:u("reviews.columns.cluster")}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:u("reviews.columns.sentiment")}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:u("reviews.columns.language")}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:u("reviews.columns.rating")}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:u("reviews.columns.date")}),(0,a.jsx)("th",{className:"px-4 py-3 font-medium text-center",children:u("reviews.columns.actions")})]})}),(0,a.jsx)("tbody",{children:M.items.map((e,t)=>(0,a.jsxs)(r.E.tr,{className:"border-b border-neutral-800/50 hover:bg-neutral-800/20 transition-colors",initial:{opacity:0},animate:{opacity:1},transition:{delay:Math.min(.01*t,.5)},children:[(0,a.jsx)("td",{className:"px-4 py-3 max-w-md",children:(0,a.jsx)("div",{className:"truncate",title:e.text,children:function(e,t){if(!t||!e)return e||"";try{let s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=e.split(RegExp("(".concat(s,")"),"gi"));return(0,a.jsx)(a.Fragment,{children:i.map((e,s)=>e.toLowerCase()===t.toLowerCase()?(0,a.jsx)("mark",{className:"bg-yellow-400/30 text-yellow-200 px-0.5 rounded",children:e},s):e)})}catch(t){return console.error("Error highlighting text:",t),e}}(e.text,x)})}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.clusterLabel&&(0,a.jsx)("span",{className:"badge",children:e.clusterLabel})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[G(e.sentiment),(0,a.jsx)("span",{className:"text-xs ".concat(e.sentiment>.3?"text-green-400":e.sentiment<-.3?"text-red-400":"text-neutral-400"),children:e.sentiment.toFixed(2)})]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs",children:[(0,a.jsx)(P.Z,{className:"w-3 h-3"}),e.lang.toUpperCase()]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:e.rating?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-yellow-400",children:[(0,a.jsx)(B.Z,{className:"w-3 h-3 fill-current"}),e.rating]}):(0,a.jsx)("span",{className:"text-neutral-600",children:"—"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:e.date?(0,a.jsx)("span",{className:"text-xs text-neutral-400",children:new Date(e.date).toLocaleDateString()}):(0,a.jsx)("span",{className:"text-neutral-600",children:"—"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:e.clusterId&&(0,a.jsxs)(r.E.button,{onClick:()=>V(e.clusterId),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 text-xs font-medium transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:[u("reviews.viewCluster"),(0,a.jsx)(U.Z,{className:"w-3 h-3"})]})})]},e.id))})]}):(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"text-neutral-500 mb-2",children:u("reviews.noResults")}),$>0&&(0,a.jsx)("button",{onClick:Y,className:"btn-secondary",children:u("reviews.clearFilters")})]})}),M&&X>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsx)("div",{className:"text-sm text-neutral-500",children:u("reviews.page",{current:E,total:X})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.E.button,{onClick:()=>z(e=>Math.max(1,e-1)),disabled:1===E,className:"btn-secondary px-3 py-1 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:E>1?{scale:1.02}:{},whileTap:E>1?{scale:.98}:{},children:(0,a.jsx)(K.Z,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,X)},(e,t)=>{let s;return s=X<=5?t+1:E<=3?t+1:E>=X-2?X-4+t:E-2+t,(0,a.jsx)(r.E.button,{onClick:()=>z(s),className:"px-3 py-1 rounded text-sm ".concat(E===s?"bg-blue-600 text-white":"bg-neutral-800 text-neutral-400 hover:bg-neutral-700"),whileHover:{scale:1.05},whileTap:{scale:.95},children:s},s)})}),(0,a.jsx)(r.E.button,{onClick:()=>z(e=>Math.min(X,e+1)),disabled:E===X,className:"btn-secondary px-3 py-1 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:E<X?{scale:1.02}:{},whileTap:E<X?{scale:.98}:{},children:(0,a.jsx)(U.Z,{className:"w-4 h-4"})})]})]})]})}var X=s(9973),ee=s(93977),et=s(11107),es=s(67058),ea=s(341),ei=s(90380),el=s(52748),en=s(58958);let er=[{icon:(0,a.jsx)(X.Z,{className:"w-5 h-5"}),title:"Data Collection & Processing",color:"text-blue-400",content:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsx)("p",{className:"text-neutral-300",children:"Sistema di raccolta multi-sorgente con normalizzazione automatica dei dati."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[(0,a.jsxs)("div",{className:"p-2 rounded-lg bg-neutral-800/50",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-blue-400 mb-1",children:"Sources"}),(0,a.jsx)("div",{className:"text-xs text-neutral-400",children:"B&B Guest Reviews, Booking Platforms, Hospitality Data"})]}),(0,a.jsxs)("div",{className:"p-2 rounded-lg bg-neutral-800/50",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-blue-400 mb-1",children:"Processing"}),(0,a.jsx)("div",{className:"text-xs text-neutral-400",children:"Deduplication, Language Detection, Normalization"})]})]})]})},{icon:(0,a.jsx)(ee.Z,{className:"w-5 h-5"}),title:"AI-Powered Analysis",color:"text-purple-400",content:(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-gradient-to-r from-purple-600/10 to-transparent border border-purple-600/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(et.Z,{className:"w-4 h-4 text-purple-400"}),(0,a.jsx)("span",{className:"font-medium text-purple-400",children:"Embeddings"})]}),(0,a.jsxs)("p",{className:"text-xs text-neutral-300",children:[(0,a.jsx)("strong",{children:"Voyage AI 3-lite"})," • 1024-dimensional semantic vectors"]}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:"Multilingual support (100+ languages)"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-gradient-to-r from-green-600/10 to-transparent border border-green-600/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(es.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"font-medium text-green-400",children:"Clustering"})]}),(0,a.jsxs)("p",{className:"text-xs text-neutral-300",children:[(0,a.jsx)("strong",{children:"HDBSCAN Algorithm"})," • Hierarchical density-based clustering"]}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:"Adaptive parameters: min_cluster_size 30-80 based on N"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-gradient-to-r from-amber-600/10 to-transparent border border-amber-600/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(ea.Z,{className:"w-4 h-4 text-amber-400"}),(0,a.jsx)("span",{className:"font-medium text-amber-400",children:"LLM Summarization"})]}),(0,a.jsxs)("p",{className:"text-xs text-neutral-300",children:[(0,a.jsx)("strong",{children:"Claude 3.5 Sonnet"})," • Context-aware summaries"]}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 mt-1",children:"MapReduce on clusters for scalability"})]})]})},{icon:(0,a.jsx)(ei.Z,{className:"w-5 h-5"}),title:"Privacy & Ethics",color:"text-green-400",content:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsx)("p",{className:"text-neutral-300",children:"Progettato con privacy-by-design e conformit\xe0 GDPR."}),(0,a.jsxs)("ul",{className:"space-y-2 mt-3",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-400 mt-0.5",children:"✓"}),(0,a.jsx)("span",{className:"text-xs text-neutral-300",children:"Anonymization di tutti i dati personali"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-400 mt-0.5",children:"✓"}),(0,a.jsx)("span",{className:"text-xs text-neutral-300",children:"No-bias prompting per personas inclusive"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-400 mt-0.5",children:"✓"}),(0,a.jsx)("span",{className:"text-xs text-neutral-300",children:"Data retention policies (90 giorni)"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-400 mt-0.5",children:"✓"}),(0,a.jsx)("span",{className:"text-xs text-neutral-300",children:"Encryption at rest and in transit"})]})]})]})}],ec=[{name:"Airbnb B&B Reviews",license:"Synthetic Dataset",description:"Tutti i dataset utilizzati sono stati prodotti in maniera sintetica, utilizzando Large Language Models appositamente fine tunati.",url:"#"},{name:"BCA Mobile Reviews",license:"Synthetic Dataset",description:"Tutti i dataset utilizzati sono stati prodotti in maniera sintetica, utilizzando Large Language Models appositamente fine tunati.",url:"#"},{name:"Women's E-Commerce",license:"Synthetic Dataset",description:"Tutti i dataset utilizzati sono stati prodotti in maniera sintetica, utilizzando Large Language Models appositamente fine tunati.",url:"#"}];function eo(){let[e,t]=i.useState(!1),[s,l]=i.useState(0),{theme:n}=(0,en.F)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.E.button,{onClick:()=>t(!0),className:"inline-flex items-center gap-2 px-6 py-2.5 rounded-full bg-blue-600/20 border border-blue-600/30 text-blue-400 hover:bg-blue-600/30 hover:border-blue-600/40 transition-all duration-200 font-medium backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)(el.Z,{className:"w-4 h-4"}),"Metodologia & Attribution"]}),(0,a.jsx)(c.M,{children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>t(!1)}),(0,a.jsxs)(r.E.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed right-0 top-0 h-full w-full max-w-lg shadow-2xl z-50 overflow-hidden ".concat("light"===n?"bg-white border-l border-neutral-200":"bg-neutral-950 border-l border-neutral-800"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b ".concat("light"===n?"border-neutral-200":"border-neutral-800"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold ".concat("light"===n?"text-neutral-900":"text-white"),children:"Metodologia & Attribution"}),(0,a.jsx)("p",{className:"text-sm mt-1 ".concat("light"===n?"text-neutral-600":"text-neutral-400"),children:"Come funziona InsightSuite"})]}),(0,a.jsx)(r.E.button,{onClick:()=>t(!1),className:"p-2 rounded-lg transition-colors ".concat("light"===n?"hover:bg-neutral-100":"hover:bg-neutral-800"),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)(W.Z,{className:"w-5 h-5 ".concat("light"===n?"text-neutral-600":"text-neutral-400")})})]}),(0,a.jsxs)("div",{className:"h-[calc(100%-80px)] overflow-y-auto p-6",children:[(0,a.jsx)("div",{className:"flex gap-2 mb-6",children:er.map((e,t)=>(0,a.jsx)(r.E.button,{onClick:()=>l(t),className:"p-2 rounded-lg transition-all ".concat(s===t?"light"===n?"bg-neutral-100 text-neutral-900":"bg-neutral-800 text-white":"light"===n?"text-neutral-500 hover:text-neutral-900 hover:bg-neutral-50":"text-neutral-500 hover:text-white hover:bg-neutral-800/50"),whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,a.jsx)("div",{className:s===t?e.color:"",children:e.icon})},t))}),(0,a.jsx)(c.M,{mode:"wait",children:(0,a.jsx)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 ".concat(er[s].color),children:[er[s].icon,(0,a.jsx)("h3",{className:"font-semibold text-lg",children:er[s].title})]}),(0,a.jsx)("div",{className:"light"===n?"[&_p]:text-neutral-700 [&_span]:text-neutral-600":"",children:er[s].content})]})},s)}),(0,a.jsxs)("div",{className:"mt-8 p-4 rounded-xl border ".concat("light"===n?"bg-neutral-50 border-neutral-200":"bg-neutral-900/50 border-neutral-800"),children:[(0,a.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2 ".concat("light"===n?"text-neutral-900":"text-white"),children:[(0,a.jsx)(et.Z,{className:"w-4 h-4 text-blue-400"}),"Tech Stack"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"light"===n?"text-neutral-600":"text-neutral-500",children:"Frontend"}),(0,a.jsx)("span",{className:"light"===n?"text-neutral-700":"text-neutral-300",children:"Next.js 14"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"light"===n?"text-neutral-600":"text-neutral-500",children:"UI"}),(0,a.jsx)("span",{className:"light"===n?"text-neutral-700":"text-neutral-300",children:"Tailwind + Framer"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"light"===n?"text-neutral-600":"text-neutral-500",children:"Charts"}),(0,a.jsx)("span",{className:"light"===n?"text-neutral-700":"text-neutral-300",children:"Recharts"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"light"===n?"text-neutral-600":"text-neutral-500",children:"Pipeline"}),(0,a.jsx)("span",{className:"light"===n?"text-neutral-700":"text-neutral-300",children:"Python 3.11"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"light"===n?"text-neutral-600":"text-neutral-500",children:"ML"}),(0,a.jsx)("span",{className:"light"===n?"text-neutral-700":"text-neutral-300",children:"scikit + HDBSCAN"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"light"===n?"text-neutral-600":"text-neutral-500",children:"API"}),(0,a.jsx)("span",{className:"light"===n?"text-neutral-700":"text-neutral-300",children:"FastAPI"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("h4",{className:"font-medium mb-3 flex items-center gap-2 ".concat("light"===n?"text-neutral-900":"text-white"),children:[(0,a.jsx)(X.Z,{className:"w-4 h-4 text-green-400"}),"Dataset Attribution"]}),(0,a.jsx)("div",{className:"space-y-3",children:ec.map((e,t)=>(0,a.jsx)(r.E.div,{className:"p-3 rounded-lg border transition-colors ".concat("light"===n?"bg-neutral-50 border-neutral-200 hover:border-neutral-300":"bg-neutral-900/50 border-neutral-800 hover:border-neutral-700"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm ".concat("light"===n?"text-neutral-900":"text-white"),children:e.name}),(0,a.jsx)("div",{className:"text-xs mt-1 ".concat("light"===n?"text-neutral-600":"text-neutral-400"),children:e.description}),(0,a.jsx)("div",{className:"text-xs text-blue-400 mt-1",children:e.license})]})})},t))})]}),(0,a.jsx)("div",{className:"mt-8 p-4 rounded-lg bg-blue-600/10 border border-blue-600/20",children:(0,a.jsx)("p",{className:"text-xs text-blue-400",children:"ℹ️ Questa \xe8 una demo con dati sintetici generati tramite LLM. Tutti i dataset utilizzati sono stati prodotti in maniera sintetica. In produzione, InsightSuite si integra con le tue fonti dati aziendali rispettando tutti i requisiti di privacy e compliance."})})]})]})]})})]})}var ed=s(46285),em=s(84860),eu=s(43184);let ex=[{icon:(0,a.jsx)(H.Z,{className:"w-3 h-3"}),text:"Quali cluster stanno peggiorando nel tempo?",color:"text-red-400 border-red-400/30 hover:bg-red-400/10"},{icon:(0,a.jsx)(ed.Z,{className:"w-3 h-3"}),text:"Mostrami i 3 temi pi\xf9 critici",color:"text-blue-400 border-blue-400/30 hover:bg-blue-400/10"},{icon:(0,a.jsx)(C.Z,{className:"w-3 h-3"}),text:"Quali sono i driver del sentiment negativo?",color:"text-amber-400 border-amber-400/30 hover:bg-amber-400/10"},{icon:(0,a.jsx)(ea.Z,{className:"w-3 h-3"}),text:"Suggerisci azioni prioritarie",color:"text-purple-400 border-purple-400/30 hover:bg-purple-400/10"}];function eh(e){let{data:t,projectId:s}=e,{t:l}=J(),[n,o]=i.useState([]),[d,m]=i.useState(""),[u,x]=i.useState(!1),[h,p]=i.useState(!1),[g,v]=i.useState(!1),j=i.useRef(null),b=i.useRef(null);i.useEffect(()=>{v(!0)},[]);let f=()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};i.useEffect(()=>{g&&(n.length>0||h)&&f()},[n,h,g]);let w=async e=>{if(!e.trim()||u)return;let a={role:"user",text:e.trim(),timestamp:new Date};o(e=>[...e,a]),m(""),x(!0),p(!0);try{let t=await fetch("/InsightSuite/api/InsightChat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e.trim(),projectId:s})});if(console.log("API Response status:",t.status),!t.ok){let e=await t.text();throw console.error("API Error Response:",e),Error("API request failed with status ".concat(t.status,": ").concat(e))}let a=await t.json();if(console.log("API Success Response:",a),a.answer&&a.answer.trim()&&!a.answer.includes("ANTHROPIC_API_KEY not configured")){let e={role:"assistant",text:a.answer,timestamp:new Date};o(t=>[...t,e])}else throw Error("LLM service not available or returned empty response")}catch(a){console.error("Chat error:",a);let s="\uD83D\uDD04 **Modalit\xe0 Offline Attiva**\n\n"+N(e,t)+"\n\n*Nota: Al momento sto utilizzando l'analisi locale. Per accedere all'AI Assistant completo, configura la chiave API Anthropic.*";o(e=>[...e,{role:"assistant",text:s,timestamp:new Date}])}finally{var i;x(!1),p(!1),null===(i=b.current)||void 0===i||i.focus()}},N=(e,t)=>{var a,i,l,n,r,c,o,d;if(!t)return"I dati del progetto non sono ancora caricati. Attendi qualche istante e riprova.";let m=e.toLowerCase(),u=t.clusters||[];t.personas;let x=t.meta||{},h=t.aggregates||{};if(m.includes("peggior")||m.includes("trend negativ")||m.includes("declino")){let e=u.filter(e=>{if(!e.trend||e.trend.length<2)return!1;let t=e.trend.slice(-3);return t.reduce((e,t)=>e+t.count,0)/t.length<e.trend.slice(0,3).reduce((e,t)=>e+t.count,0)/Math.min(3,e.trend.length)&&e.sentiment<0}).slice(0,3);return e.length>0?"**Analisi dei Trend Negativi**\n\n"+"Ho identificato ".concat(e.length," cluster con trend in peggioramento:\n\n")+e.map((e,t)=>"**".concat(t+1,". ").concat(e.label,"**\n")+"• Sentiment attuale: ".concat(e.sentiment.toFixed(2)," (").concat(e.sentiment<-.5?"molto negativo":"negativo",")\n")+"• Impatto: ".concat((100*e.share).toFixed(1),"% delle recensioni\n")+"• Trend: -".concat(((1-e.trend[e.trend.length-1].count/e.trend[0].count)*100).toFixed(0),"% nell'ultimo periodo\n")+"• Criticit\xe0 principali: ".concat(e.weaknesses.slice(0,2).join(", "),"\n")+"• Keywords correlate: ".concat(e.keywords.slice(0,3).join(", "))).join("\n\n")+"\n\n**Raccomandazione**: Questi cluster richiedono attenzione immediata. "+'Il cluster "'.concat(e[0].label,'" \xe8 particolarmente critico con un calo del ')+"".concat(((1-e[0].trend[e[0].trend.length-1].count/e[0].trend[0].count)*100).toFixed(0),"%."):"Non ho identificato cluster con trend particolarmente negativi nel periodo analizzato. Il sentiment complessivo si mantiene stabile."}if(m.includes("critici")||m.includes("problemi")||m.includes("urgenti")){let e=u.sort((e,t)=>{let s=Math.abs(e.sentiment||0)*(e.share||0)*100+(e.opportunity_score||0);return Math.abs(t.sentiment||0)*(t.share||0)*100+(t.opportunity_score||0)-s}).slice(0,3),t=e.reduce((e,t)=>e+(t.share||0),0);return"**Analisi dei Temi Critici**\n\n"+"I 3 temi pi\xf9 critici rappresentano il ".concat((100*t).toFixed(0),"% del totale:\n\n")+e.map((e,t)=>{var s,a,i;let l=e.sentiment||0;return"**".concat(t+1,". ").concat(e.label,"** (").concat(l<-.5?"Critico":l<-.2?"Alto":"Medio",")\n")+"• Opportunity Score: ".concat((e.opportunity_score||0).toFixed(2),"\n")+"• Impatto: ".concat((100*(e.share||0)).toFixed(1),"% degli utenti (").concat((e.size||0).toLocaleString()," recensioni)\n")+"• Sentiment: ".concat(l.toFixed(2),"\n")+"• Criticit\xe0 principali:\n"+(e.weaknesses||[]).slice(0,3).map(e=>"  - ".concat(e)).join("\n")+"\n"+'• Quote rappresentative: "'.concat((null===(i=e.quotes)||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:null===(s=a.text)||void 0===s?void 0:s.substring(0,100))||"Non disponibile",'..."')}).join("\n\n")+'\n\n**Insight chiave**: Il cluster "'.concat((null===(l=e[0])||void 0===l?void 0:l.label)||"identificato",'" richiede intervento prioritario ')+"con ".concat((100*((null===(n=e[0])||void 0===n?void 0:n.share)||0)).toFixed(0),"% di impatto sugli utenti.")}if(m.includes("driver")||m.includes("sentiment negativ")||m.includes("causa")||m.includes("motiv")){let e=u.filter(e=>0>(e.sentiment||0)).sort((e,t)=>(e.sentiment||0)*(e.share||0)-(t.sentiment||0)*(t.share||0)).slice(0,4),t=e.reduce((e,t)=>e+(t.share||0),0),s=e.length>0?e.reduce((e,t)=>e+(t.sentiment||0),0)/e.length:0;return"**Analisi dei Driver del Sentiment Negativo**\n\n"+"Ho identificato ".concat(e.length," driver principali che impattano il ").concat((100*t).toFixed(0),"% degli utenti:\n\n")+e.map((e,t)=>"**".concat(t+1,". ").concat(e.label,"**\n")+"• Contributo negativo: ".concat(Math.abs((e.sentiment||0)*(e.share||0)*100).toFixed(1)," punti\n")+"• Problematiche: ".concat((e.weaknesses||[]).slice(0,2).join(", ")||"Non specificate","\n")+"• Keywords negative: ".concat((e.keywords||[]).filter(e=>e.toLowerCase().includes("non")||e.toLowerCase().includes("problema")).slice(0,3).join(", ")||"Non disponibili")).join("\n\n")+"\n\n**Correlazioni identificate**:\n"+"• Sentiment medio negativo: ".concat(s.toFixed(2),"\n")+"• Cluster pi\xf9 correlati: ".concat(e.slice(0,2).map(e=>e.label).join(" + "),"\n")+"• Pattern ricorrente: ".concat(e.length>0&&(null===(r=e[0].weaknesses)||void 0===r?void 0:r.length)>0?e[0].weaknesses[0]:"Non identificato","\n\n")+'**Strategia consigliata**: Focus immediato su "'.concat(e.length>0?e[0].label:"le aree critiche identificate",'" ')+"per massimizzare l'impatto positivo sul sentiment complessivo."}if(m.includes("azioni")||m.includes("priorit")||m.includes("suggerisci")||m.includes("fare")){let e=u.sort((e,t)=>(t.opportunity_score||0)-(e.opportunity_score||0)).slice(0,5),t=e.filter(e=>(e.sentiment||0)>-.3&&(e.share||0)>.1),a=e.filter(e=>-.3>=(e.sentiment||0)&&(e.share||0)>.1),i=e.filter(e=>-.3>=(e.sentiment||0)&&.1>=(e.share||0));return"**Piano d'Azione Strategico - ".concat(s.toUpperCase(),"**\n\n")+"Basandomi su ".concat(((null===(c=x.totals)||void 0===c?void 0:c.reviews)||0).toLocaleString()," recensioni analizzate:\n\n")+"**FASE 1: Quick Wins (0-30 giorni)**\n"+"Impatto stimato: +".concat((.15*t.length).toFixed(1)," punti sentiment\n")+t.map(e=>"• ".concat(e.label,": ").concat((e.strengths||[])[0]?"Potenziare ".concat(e.strengths[0]):"Migliorare processo","\n")+"  - Effort: Basso | Impact: ".concat((100*(e.share||0)).toFixed(0),"% utenti")).join("\n")+"\n\n**FASE 2: Must Fix (30-60 giorni)**\n"+"Impatto stimato: +".concat((.25*a.length).toFixed(1)," punti sentiment\n")+a.map(e=>"• ".concat(e.label,": Risolvere ").concat((e.weaknesses||[])[0]||"problemi identificati","\n")+"  - Effort: Medio | Impact: ".concat((100*(e.share||0)).toFixed(0),"% utenti | Urgenza: Alta")).join("\n")+"\n\n**FASE 3: Iniziative Strategiche (60-90 giorni)**\n"+i.map(e=>"• ".concat(e.label,": Piano di miglioramento strutturale\n")+"  - Effort: Alto | Impact: Lungo termine").join("\n")+"\n\n**KPI da Monitorare**:\n• Sentiment Score: Target +0.3 in 90 giorni\n• Volume recensioni negative: -40% su cluster critici\n• NPS Score: +15 punti\n• Retention Rate: +10%\n\n"+'**Next Step Immediato**: Iniziare con "'.concat((null===(o=t[0])||void 0===o?void 0:o.label)||(null===(d=a[0])||void 0===d?void 0:d.label),'" ')+"per generare momentum positivo visibile in 2 settimane."}return"**Dashboard Analitica ".concat(s.toUpperCase(),"**\n\n")+"**Metriche Chiave:**\n"+"• Dataset: ".concat(((null===(a=x.totals)||void 0===a?void 0:a.reviews)||0).toLocaleString()," recensioni\n")+"• Cluster identificati: ".concat((null===(i=x.totals)||void 0===i?void 0:i.clusters)||0,"\n")+"• Sentiment medio: ".concat((h.sentiment_mean||0).toFixed(2),"\n\n")+"**Top 3 Temi Positivi:**\n"+u.filter(e=>(e.sentiment||0)>0).sort((e,t)=>(t.sentiment||0)-(e.sentiment||0)).slice(0,3).map((e,t)=>"".concat(t+1,". ").concat(e.label," (+").concat((e.sentiment||0).toFixed(2),")")).join("\n")+"\n\n**Top 3 Aree Critiche:**\n"+u.filter(e=>0>(e.sentiment||0)).sort((e,t)=>(e.sentiment||0)-(t.sentiment||0)).slice(0,3).map((e,t)=>"".concat(t+1,". ").concat(e.label," (").concat((e.sentiment||0).toFixed(2),")")).join("\n")+"\n\nUsa i suggerimenti sopra per esplorare aspetti specifici, oppure fammi qualsiasi domanda sui dati!"};return(0,a.jsxs)(r.E.div,{className:"insightsuite-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br from-purple-600/20 to-blue-600/20",children:(0,a.jsx)(em.Z,{className:"w-5 h-5 text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"title-lg",children:"AI Assistant"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Analizza i dati con l'intelligenza artificiale"})]})]}),(0,a.jsxs)("div",{className:"h-96 overflow-y-auto rounded-xl p-4 mb-4 border bg-neutral-800/40 border-neutral-700",children:[(0,a.jsx)(c.M,{children:0===n.length?(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(em.Z,{className:"w-12 h-12 text-neutral-600 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-neutral-500 text-sm",children:"Chiedimi qualsiasi cosa sui dati del progetto"}),(0,a.jsx)("p",{className:"text-neutral-600 text-xs mt-1",children:"Usa i suggerimenti sotto per iniziare"})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[n.map((e,t)=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3 ".concat("user"===e.role?"flex-row-reverse":""),children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat("user"===e.role?"bg-blue-600/20 text-blue-400":"bg-purple-600/20 text-purple-400"),children:"user"===e.role?(0,a.jsx)(M.Z,{className:"w-4 h-4"}):(0,a.jsx)(em.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex-1 ".concat("user"===e.role?"text-right":""),children:[(0,a.jsx)("div",{className:"text-xs text-neutral-500 mb-1",children:"user"===e.role?l("chat.you"):l("chat.assistant")}),(0,a.jsx)("div",{className:"inline-block px-4 py-2 rounded-xl ".concat((e.role,"bg-blue-600/20 text-white")),children:(0,a.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:e.text.split("\n").map((t,s)=>(0,a.jsxs)(i.Fragment,{children:[t.startsWith("**")&&t.endsWith("**")?(0,a.jsx)("strong",{children:t.slice(2,-2)}):t.startsWith("• ")?(0,a.jsx)("div",{className:"ml-4",children:t}):t.startsWith("  -")||t.startsWith("   •")?(0,a.jsx)("div",{className:"ml-8 text-neutral-400",children:t}):t,s<e.text.split("\n").length-1&&(0,a.jsx)("br",{})]},s))})})]})]},t)),h&&(0,a.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-purple-600/20 text-purple-400",children:(0,a.jsx)(em.Z,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"bg-blue-600/20 px-4 py-2 rounded-xl",children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-neutral-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"w-2 h-2 bg-neutral-500 rounded-full animate-pulse delay-75"}),(0,a.jsx)("span",{className:"w-2 h-2 bg-neutral-500 rounded-full animate-pulse delay-150"})]})})]})]})}),(0,a.jsx)("div",{ref:j})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:ex.map((e,t)=>(0,a.jsxs)(r.E.button,{onClick:()=>w(e.text),disabled:u,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium border transition-all ".concat(u?"opacity-50 cursor-not-allowed":""," ").concat(e.color),whileHover:u?{}:{scale:1.02},whileTap:u?{}:{scale:.98},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*t},children:[e.icon,e.text]},t))}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w(d)},className:"flex gap-2",children:[(0,a.jsx)("input",{ref:b,value:d,onChange:e=>m(e.target.value),placeholder:l("chat.placeholder"),disabled:u,className:"input-field flex-1"}),(0,a.jsx)(r.E.button,{type:"submit",disabled:u||!d.trim(),className:"btn-primary px-6",whileHover:{scale:1.02},whileTap:{scale:.98},children:u?(0,a.jsx)(Q.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(eu.Z,{className:"w-4 h-4"})})]})]})}function ep(e){let{icon:t,title:s,value:i,subtitle:l,trend:n,trendUp:c,rightSlot:o,className:d=""}=e;return(0,a.jsxs)(r.E.div,{className:"insightsuite-card insightsuite-card-hover h-full ".concat(d),whileHover:{y:-4,scale:1.02},transition:{type:"spring",stiffness:300,damping:20},children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,a.jsx)("div",{className:"text-blue-400",children:t}),(0,a.jsx)("h3",{className:"title-card",children:s})]}),o]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-3",children:[(0,a.jsx)("div",{className:"kpi-value bg-gradient-to-r from-white to-neutral-300 bg-clip-text text-transparent",children:i}),n&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"flex items-center gap-1 text-sm font-medium ".concat(!0===c?"text-green-400":!1===c?"text-red-400":"text-gray-400"),children:[!0===c?(0,a.jsx)(O.Z,{className:"w-3 h-3"}):!1===c?(0,a.jsx)(H.Z,{className:"w-3 h-3"}):(0,a.jsx)("span",{className:"w-3 h-3 flex items-center justify-center",children:"-"}),n]})]}),l&&(0,a.jsx)("div",{className:"insightsuite-muted text-sm mt-2",children:l})]})}var eg=s(753),ev=s(71095),ej=s(63213),eb=s(19547),ef=s(31682);function ew(e){let{cluster:t}=e,{selectedClusterId:s,setSelectedClusterId:l}=m(),{theme:n}=(0,en.F)(),[o,d]=i.useState(null),x=e=>e>.3?"text-green-400":e<-.3?"text-red-400":"text-neutral-400";if(!t)return null;let p=t.sentiment||0,g=t.opportunity_score||0,v=t.trend||[],j=t.keywords||[];t.summary,t.strengths,t.weaknesses,t.quotes;let w="light"===n?"bg-white":"bg-neutral-950",N="light"===n?"border-neutral-200":"border-neutral-800",y="light"===n?"text-neutral-900":"text-white",S="light"===n?"text-neutral-600":"text-neutral-400";return(0,a.jsx)(c.M,{children:!!s&&!!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40",onClick:()=>l(null)}),(0,a.jsxs)(r.E.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed right-0 top-0 h-full w-full max-w-2xl ".concat(w," ").concat(N," border-l shadow-2xl z-50 overflow-hidden"),children:[(0,a.jsx)("div",{className:"sticky top-0 ".concat(w," backdrop-blur-sm ").concat(N," border-b p-6 z-10"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold ".concat(y," mb-2"),children:t.label||"Cluster Senza Nome"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,a.jsx)(eg.Z,{className:"w-4 h-4 ".concat(S)}),(0,a.jsxs)("span",{className:S,children:[(t.size||0).toLocaleString()," recensioni"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,a.jsx)(ed.Z,{className:"w-4 h-4 ".concat(S)}),(0,a.jsxs)("span",{className:S,children:[(100*(t.share||0)).toFixed(1),"% share"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-sm ".concat(x(p)),children:[p>.3?(0,a.jsx)(O.Z,{className:"w-4 h-4"}):p<-.3?(0,a.jsx)(H.Z,{className:"w-4 h-4"}):(0,a.jsx)(ed.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"font-medium",children:[p>0?"+":"",p.toFixed(2)]})]})]})]}),(0,a.jsx)(r.E.button,{onClick:()=>l(null),className:"p-2 rounded-lg hover:".concat("light"===n?"bg-neutral-100":"bg-neutral-800"," transition-colors"),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)(W.Z,{className:"w-5 h-5 ".concat(S)})})]})}),(0,a.jsx)("div",{className:"h-[calc(100%-120px)] overflow-y-auto p-6",children:(0,a.jsxs)(r.E.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)(r.E.div,{className:"p-4 rounded-xl border ".concat(p>.3?"bg-green-600/10 border-green-600/20":p<-.3?"bg-red-600/10 border-red-600/20":"bg-neutral-600/10 border-neutral-600/20"),whileHover:{scale:1.02},children:[(0,a.jsx)("div",{className:"text-xs ".concat(S," mb-1"),children:"Sentiment"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(x(p)),children:[p>0?"+":"",p.toFixed(2)]})]}),(0,a.jsxs)(r.E.div,{className:"p-4 rounded-xl bg-blue-600/10 border border-blue-600/20",whileHover:{scale:1.02},children:[(0,a.jsx)("div",{className:"text-xs ".concat(S," mb-1"),children:"Opportunity"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:g.toFixed(2)})]}),(0,a.jsxs)(r.E.div,{className:"p-4 rounded-xl bg-purple-600/10 border border-purple-600/20",whileHover:{scale:1.02},children:[(0,a.jsx)("div",{className:"text-xs ".concat(S," mb-1"),children:"Trend"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-400",children:[v.length>1&&v[v.length-1].count>v[0].count?"↑":"↓",0===v.length&&"—"]})]})]}),v.length>0&&(0,a.jsxs)("div",{className:"p-5 rounded-xl ".concat("light"===n?"bg-neutral-50":"bg-neutral-900/50"," border ").concat(N),children:[(0,a.jsxs)("h3",{className:"font-semibold ".concat(y," mb-4 flex items-center gap-2"),children:[(0,a.jsx)(ed.Z,{className:"w-4 h-4 text-blue-400"}),"Trend Temporale"]}),(0,a.jsx)("div",{className:"h-48",children:(0,a.jsx)(u.h,{width:"100%",height:"100%",children:(0,a.jsxs)(eb.T,{data:v,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorTrend",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),(0,a.jsx)(b.K,{dataKey:"week",tick:{fontSize:11,fill:"light"===n?"#525252":"#737373"},tickLine:!1,axisLine:{stroke:"light"===n?"#d4d4d4":"#404040"}}),(0,a.jsx)(f.B,{tick:{fontSize:11,fill:"light"===n?"#525252":"#737373"},tickLine:!1,axisLine:{stroke:"light"===n?"#d4d4d4":"#404040"}}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"light"===n?"#ffffff":"#171717",border:"1px solid ".concat("light"===n?"#e5e5e5":"#404040"),borderRadius:"8px",fontSize:"12px"}}),(0,a.jsx)(ef.u,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorTrend)"})]})})})]}),j.length>0&&(0,a.jsxs)("div",{className:"p-5 rounded-xl ".concat("light"===n?"bg-neutral-50":"bg-neutral-900/50"," border ").concat(N),children:[(0,a.jsxs)("h3",{className:"font-semibold ".concat(y," mb-3 flex items-center gap-2"),children:[(0,a.jsx)(eg.Z,{className:"w-4 h-4 text-purple-400"}),"Parole Chiave"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map((e,t)=>(0,a.jsx)(r.E.span,{className:"px-3 py-1.5 rounded-full bg-purple-600/20 text-purple-300 text-sm border border-purple-600/30",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t},whileHover:{scale:1.05},children:e},t))})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsxs)(r.E.button,{onClick:()=>{if(!t)return;let e="\n# Cluster Report: ".concat(t.label,"\n\n## Overview\n- **Size**: ").concat(t.size.toLocaleString()," reviews\n- **Share**: ").concat((100*t.share).toFixed(1),"%\n- **Sentiment**: ").concat(t.sentiment.toFixed(2),"\n- **Opportunity Score**: ").concat(t.opportunity_score.toFixed(2),"\n\n## Summary\n").concat(t.summary||"No summary available","\n\n## Keywords\n").concat((t.keywords||[]).join(", "),"\n\n## Strengths\n").concat((t.strengths||[]).map(e=>"- ".concat(e)).join("\n"),"\n\n## Weaknesses\n").concat((t.weaknesses||[]).map(e=>"- ".concat(e)).join("\n"),"\n\n## Representative Quotes\n").concat((t.quotes||[]).slice(0,5).map(e=>'"'.concat(e.text,'"')).join("\n\n"),"\n\n---\nGenerated on ").concat(new Date().toLocaleString(),"\n"),s=new Blob([e],{type:"text/markdown"}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download="cluster-".concat(t.id,"-report.md"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},className:"flex-1 btn-primary justify-center flex items-center gap-2 px-6 py-3 rounded-xl font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(ev.Z,{className:"w-4 h-4"}),"Export Report"]}),(0,a.jsxs)(r.E.button,{onClick:()=>{if(!t)return;let e=JSON.parse(localStorage.getItem("insightsuite-storyboard")||"[]");e.push({id:Date.now().toString(),clusterId:t.id,label:t.label,sentiment:t.sentiment,share:t.share,addedAt:new Date().toISOString()}),localStorage.setItem("insightsuite-storyboard",JSON.stringify(e)),alert("Cluster added to storyboard successfully!")},className:"flex-1 btn-secondary justify-center flex items-center gap-2 px-6 py-3 rounded-xl font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(ej.Z,{className:"w-4 h-4"}),"Add to Storyboard"]})]})]})})]})]})})}function eN(){let{locale:e,setLocale:t}=J();return(0,a.jsx)(r.E.button,{onClick:()=>t("it"===e?"en":"it"),className:"p-2.5 rounded-full bg-neutral-800/50 backdrop-blur-sm hover:bg-neutral-700/50 transition-colors group",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Change language",title:"Change language",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(P.Z,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-xs font-medium text-neutral-300 uppercase",children:e})]})})}var ey=s(94717);let eS={animate:e=>({y:[0,-80,0],x:[0,40*(e%2==0?1:-1),-40*(e%2==0?1:-1),0],opacity:[0,.8,.8,0],scale:[.8,1.2,.8],transition:{duration:8+.5*e,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut",delay:.1*e%1.5}})};function ek(e){let{progress:t,isVisible:s,onLoadingComplete:n=()=>{}}=e,[o,d]=(0,i.useState)(s),[m,u]=(0,i.useState)(0),[x,h]=(0,i.useState)(0),[p,g]=(0,i.useState)({x:0,y:0}),[v,j]=(0,i.useState)(!1),b=["Caricamento dei dati...","Analizzando i cluster tematici...","Elaborando insights avanzati...","Generando visualizzazioni...","I tuoi dati sono pronti!"];(0,i.useEffect)(()=>{j(!!("ontouchstart"in window||navigator.maxTouchPoints>0))},[]),(0,i.useEffect)(()=>{if(v)return;let e=e=>{g({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[v]),(0,i.useEffect)(()=>{if(s){d(!0),u(0),h(0);let e=setInterval(()=>{u(t=>{let s=Math.min(t+1.4285714285714286,100);return s>=100&&(clearInterval(e),setTimeout(()=>{d(!1),n()},300)),s})},50),t=setInterval(()=>{h(e=>e>=b.length-1?(clearInterval(t),e):e+1)},3500/b.length);return()=>{clearInterval(e),clearInterval(t)}}},[s,n,b.length]);let f={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},w=(0,i.useMemo)(()=>{let e=(e,t)=>e*t%100/100,t=["∑","∆","∫","∂","√","∞","π","θ","λ","σ","μ","α","β","γ","Ω","φ","ψ","χ","ρ","ε"],s=["0","1","2","3","4","5","6","7","8","9","%","+","-","\xd7","\xf7","=","<",">","≈","≠"];return Array.from({length:25}).map((i,l)=>{let n=e(l,23),c=e(l,51),o=e(l,73),d=e(l,89),m=e(l,103),u=[...t,...s],x=u[Math.floor(m*u.length)];return(0,a.jsx)(r.E.div,{className:"absolute font-mono font-bold flex items-center justify-center",style:{fontSize:16*n+12+"px",color:c>.5?"#3b82f6":"#8b5cf6",left:"".concat(100*o,"%"),top:"".concat(100*d,"%"),filter:"blur(0.2px)",textShadow:"0 0 10px ".concat(c>.5?"#3b82f6":"#8b5cf6","40")},custom:l,variants:eS,animate:"animate",children:x},l)})},[]);return(0,a.jsx)(c.M,{mode:"wait",children:o&&(0,a.jsxs)(r.E.div,{className:"fixed inset-0 z-[100] flex items-center justify-center overflow-hidden",style:{background:"radial-gradient(circle at center, #0a0a0a 0%, #000000 100%)"},variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.5,ease:"easeInOut"}}},initial:"hidden",animate:"visible",exit:"exit",children:[!v&&(0,a.jsx)("div",{className:"fixed pointer-events-none z-50",style:{left:p.x-100,top:p.y-100,width:200,height:200},children:(0,a.jsx)("div",{className:"w-full h-full rounded-full",style:{background:"radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 50%)",filter:"blur(20px)"}})}),(0,a.jsx)(r.E.div,{className:"absolute inset-0",animate:{background:["radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.2) 0%, transparent 50%)","radial-gradient(circle at 80% 50%, rgba(147, 51, 234, 0.2) 0%, transparent 50%)","radial-gradient(circle at 50% 50%, rgba(6, 182, 212, 0.2) 0%, transparent 50%)","radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.2) 0%, transparent 50%)"]},transition:{duration:8,repeat:Number.POSITIVE_INFINITY,ease:"linear"}}),(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:w}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center z-10 relative px-4 md:px-8 w-full max-w-2xl mx-auto min-h-screen",children:[(0,a.jsx)(r.E.div,{className:"mb-8 md:mb-12 relative flex-shrink-0",variants:f,children:(0,a.jsx)("div",{className:"relative w-40 h-40 md:w-44 md:h-44 rounded-full overflow-hidden bg-black",children:(0,a.jsxs)("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center",children:[(0,a.jsx)(ey.default,{src:function(e){let t=e.startsWith("/")?e:"/".concat(e);return"".concat(l).concat(t)}("/data-avatar.png"),alt:"InsightSuite Analytics",width:130,height:130,className:"w-full h-full object-cover",priority:!0,onError:e=>{e.target.style.display="none";let t=document.getElementById("loading-fallback-icon");t&&(t.style.display="flex")}}),(0,a.jsx)("div",{id:"loading-fallback-icon",className:"absolute inset-0 items-center justify-center hidden",children:(0,a.jsx)("svg",{className:"w-24 h-24 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})}),(0,a.jsx)(r.E.h1,{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-6 md:mb-8 text-center flex-shrink-0",variants:f,children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:"InsightSuite"})}),(0,a.jsxs)(r.E.div,{className:"w-full max-w-xs sm:max-w-sm md:max-w-md space-y-4 md:space-y-6 mb-8 md:mb-12 flex-shrink-0",variants:f,children:[(0,a.jsx)("div",{className:"h-2 md:h-3 bg-gray-800/50 backdrop-blur rounded-full overflow-hidden relative",children:(0,a.jsx)(r.E.div,{className:"h-full bg-gradient-to-r from-blue-600 via-purple-600 to-cyan-600 rounded-full",initial:{width:"0%"},animate:{width:"".concat(m,"%")},transition:{duration:.3,ease:"easeInOut"},style:{boxShadow:"0 0 20px rgba(59, 130, 246, 0.5)"}})}),(0,a.jsx)(r.E.div,{className:"text-lg md:text-xl text-gray-300 text-center font-medium",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:b[x]},x)]}),(0,a.jsx)(r.E.div,{className:"text-sm md:text-base text-gray-400 text-center px-4 md:px-8 mt-6 md:mt-8 flex-shrink-0",variants:f,initial:{opacity:0},animate:{opacity:[0,1,1,0]},transition:{duration:3.5,times:[0,.2,.7,1]},children:v?"\uD83D\uDCCA Suggerimento: Naviga tra i cluster per esplorare temi e sentiment":"\uD83D\uDCC8 Suggerimento: Interagisci con i grafici per analisi dettagliate"})]})]})})}var eC=s(89443),eE=s(20895),ez=s(31525),eT=s(63458);let eM={airbnb:n("/demo/projects/airbnb.json"),mobile:n("/demo/projects/mobile.json"),ecommerce:n("/demo/projects/ecommerce.json")};function eA(){var e,t,s,l,n,o,d,x,g,v,w,N,y,k,E,z,T,M,A;let{t:I,locale:F}=J(),[P,D]=i.useState(!1),[L,R]=i.useState(!1),[H,q]=i.useState(!0),{theme:_,setTheme:W}=(0,en.F)(),{selectedProject:Q,projectData:B,isLoading:U,selectedClusterId:K,setSelectedProject:V,setProjectData:G,setIsLoading:Y}=m();i.useEffect(()=>{D(!0),window.scrollTo(0,0)},[]),i.useEffect(()=>{let e=!1;return(async()=>{L?(Y(!0),window.scrollTo({top:0,behavior:"smooth"})):q(!0);let t=Date.now(),s=L?250:3500;await new Promise(e=>setTimeout(e,L?250:100));try{let t=await fetch(eM[Q],{cache:"no-store"}),s=await t.json();e||G(s)}catch(t){console.error("Failed to load project:",t),e||G(null)}let a=Math.max(0,s-(Date.now()-t));a>0&&await new Promise(e=>setTimeout(e,a)),e||(L||R(!0),Y(!1))})(),()=>{e=!0}},[Q,Y,G,L]);let ee=null!==(z=null==B?void 0:B.clusters)&&void 0!==z?z:[],et=ee.find(e=>e.id===K)||null,es=i.useMemo(()=>[...ee].sort((e,t)=>t.share-e.share).slice(0,3),[ee]),ei=i.useMemo(()=>{var e;let t=null==B?void 0:null===(e=B.timeseries)||void 0===e?void 0:e.monthly;if(!t||t.length<2)return{reviewsTrend:null,sentimentTrend:null};let s=t[t.length-1],a=t[t.length-2],i=s.volume-a.volume,l=a.volume>0?i/a.volume*100:0,n=s.sentiment_mean-a.sentiment_mean;return{reviewsTrend:0!==l?{value:l>0?"+".concat(l.toFixed(1),"%"):"".concat(l.toFixed(1),"%"),isPositive:l>0,isZero:!1}:null,sentimentTrend:Math.abs(n)>.01?{value:n>0?"+".concat(n.toFixed(2)):"".concat(n.toFixed(2)),isPositive:n>0,isZero:!1}:null}},[null==B?void 0:null===(e=B.timeseries)||void 0===e?void 0:e.monthly]);if(!P)return null;let el=e=>I("datasets.".concat(e));return H&&!L?(0,a.jsx)(ek,{progress:100,isVisible:!0,onLoadingComplete:()=>q(!1)}):(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[(0,a.jsx)(r.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-500/20 to-purple-500/20 backdrop-blur-sm",children:(0,a.jsx)(ea.Z,{className:"w-6 h-6 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"title-xl bg-gradient-to-r from-white to-neutral-400 bg-clip-text text-transparent",children:I("app.name")}),(0,a.jsx)("p",{className:"insightsuite-muted text-sm",children:I("header.project",{name:el(Q),source:(null==B?void 0:null===(t=B.meta)||void 0===t?void 0:t.source)||I("app.loading")})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1 p-1 rounded-full bg-neutral-800/50 backdrop-blur-sm",children:["airbnb","mobile","ecommerce"].map(e=>(0,a.jsx)(r.E.button,{onClick:()=>V(e),className:"px-4 py-2 text-sm font-medium rounded-full transition-all duration-200 ".concat(Q===e?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-neutral-400 hover:text-white hover:bg-neutral-700/50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:el(e)},e))}),(0,a.jsx)(eN,{}),(0,a.jsx)(r.E.button,{onClick:()=>W("dark"===_?"light":"dark"),className:"p-2.5 rounded-full bg-neutral-800/50 backdrop-blur-sm hover:bg-neutral-700/50 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":I("header.themeToggle"),title:I("header.themeToggle"),children:"dark"===_?(0,a.jsx)(eC.Z,{className:"w-5 h-5 text-yellow-400"}):(0,a.jsx)(eE.Z,{className:"w-5 h-5 text-blue-600"})})]})]})}),(0,a.jsx)(c.M,{mode:"wait",children:U?(0,a.jsx)(eF,{},"loading"):(0,a.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(ep,{icon:(0,a.jsx)(X.Z,{className:"w-5 h-5"}),title:I("kpi.totalReviews"),value:null!==(T=null==B?void 0:null===(n=B.meta)||void 0===n?void 0:null===(l=n.totals)||void 0===l?void 0:null===(s=l.reviews)||void 0===s?void 0:s.toLocaleString())&&void 0!==T?T:"—",subtitle:I("kpi.clustersIdentified",{n:null!==(M=null==B?void 0:null===(d=B.meta)||void 0===d?void 0:null===(o=d.totals)||void 0===o?void 0:o.clusters)&&void 0!==M?M:0}),trend:null===(x=ei.reviewsTrend)||void 0===x?void 0:x.value,trendUp:null===(g=ei.reviewsTrend)||void 0===g?void 0:g.isPositive}),(0,a.jsx)(ep,{icon:(0,a.jsx)(O.Z,{className:"w-5 h-5"}),title:I("kpi.avgSentiment"),value:(null==B?void 0:null===(v=B.aggregates)||void 0===v?void 0:v.sentiment_mean)!==void 0?B.aggregates.sentiment_mean.toFixed(2):"—",subtitle:I("kpi.avgScale"),trend:null===(w=ei.sentimentTrend)||void 0===w?void 0:w.value,trendUp:null===(N=ei.sentimentTrend)||void 0===N?void 0:N.isPositive}),(0,a.jsx)(ep,{icon:(0,a.jsx)(C.Z,{className:"w-5 h-5"}),title:I("kpi.personas"),value:null!==(A=null==B?void 0:null===(y=B.personas)||void 0===y?void 0:y.length)&&void 0!==A?A:"—",subtitle:I("kpi.segments")}),(0,a.jsxs)("div",{className:"insightsuite-card insightsuite-card-hover h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(ed.Z,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("h3",{className:"title-card",children:I("kpi.topThemes")})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:es.map((e,t)=>(0,a.jsx)(r.E.span,{className:"badge",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t},title:e.label,children:(0,a.jsx)("span",{className:"break-words line-clamp-2 text-left leading-tight",children:e.label})},e.id))})]})]}),(null==B?void 0:null===(k=B.timeseries)||void 0===k?void 0:k.monthly)&&B.timeseries.monthly.length>0&&(0,a.jsxs)("div",{className:"insightsuite-card",children:[(0,a.jsx)("h2",{className:"title-lg mb-4",children:I("charts.trends.title")}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"h-[260px]",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:I("charts.trends.sentimentOverTime")}),(0,a.jsx)(u.h,{width:"100%",height:"100%",children:(0,a.jsxs)(ez.w,{data:B.timeseries.monthly,children:[(0,a.jsx)(j.q,{stroke:"#27272a",strokeDasharray:"3 3"}),(0,a.jsx)(b.K,{dataKey:"date",tick:{fill:"#a3a3a3",fontSize:11}}),(0,a.jsx)(f.B,{domain:[-1,1],tick:{fill:"#a3a3a3",fontSize:11}}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#171717",border:"1px solid #404040",borderRadius:"8px"}}),(0,a.jsx)(eT.x,{type:"monotone",dataKey:"sentiment_mean",stroke:"#3b82f6",dot:!1,strokeWidth:2})]})})]}),(0,a.jsxs)("div",{className:"h-[260px]",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:I("charts.trends.volumeOverTime")}),(0,a.jsx)(u.h,{width:"100%",height:"100%",children:(0,a.jsxs)(eb.T,{data:B.timeseries.monthly,children:[(0,a.jsx)(j.q,{stroke:"#27272a",strokeDasharray:"3 3"}),(0,a.jsx)(b.K,{dataKey:"date",tick:{fill:"#a3a3a3",fontSize:11}}),(0,a.jsx)(f.B,{tick:{fill:"#a3a3a3",fontSize:11}}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#171717",border:"1px solid #404040",borderRadius:"8px"}}),(0,a.jsx)(ef.u,{type:"monotone",dataKey:"volume",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.3,strokeWidth:2})]})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-8",children:(0,a.jsxs)("div",{className:"insightsuite-card insightsuite-card-hover h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"title-lg",children:I("charts.themesMap")}),(0,a.jsx)("span",{className:"text-xs text-neutral-500",children:I("charts.themesLegend")})]}),(0,a.jsx)(p,{clusters:ee})]})}),(0,a.jsx)("div",{className:"lg:col-span-4",children:(0,a.jsxs)("div",{className:"insightsuite-card insightsuite-card-hover h-full",children:[(0,a.jsx)("h2",{className:"title-lg mb-4",children:I("charts.opportunityMatrix")}),(0,a.jsx)(S,{clusters:ee})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(C.Z,{className:"w-5 h-5 text-purple-400"}),(0,a.jsx)("h2",{className:"title-lg",children:I("personas.title")})]}),(null==B?void 0:B.personas)&&B.personas.length>3?(0,a.jsx)(eI,{personas:B.personas}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:null==B?void 0:null===(E=B.personas)||void 0===E?void 0:E.map((e,t)=>(0,a.jsx)(r.E.div,{whileHover:{y:-4,scale:1.02},children:(0,a.jsx)(Z,{persona:e,index:t})},e.id))})]}),(0,a.jsx)($,{data:B||void 0,clusters:ee,title:I("reviews.title")}),(0,a.jsx)(eh,{data:B||void 0,projectId:Q}),(0,a.jsx)("div",{className:"flex justify-center pt-8 pb-4",children:(0,a.jsx)(eo,{})})]},"content")}),(0,a.jsx)(ew,{cluster:et})]})})}function eI(e){let{personas:t}=e,[s,l]=i.useState({canScrollLeft:!1,canScrollRight:!0}),n=i.useRef(null),o=i.useCallback(()=>{let e=n.current;if(!e)return;let{scrollLeft:t,scrollWidth:s,clientWidth:a}=e;l({canScrollLeft:t>0,canScrollRight:t<s-a-1})},[]);return i.useEffect(()=>{let e=n.current;if(e)return o(),e.addEventListener("scroll",o),window.addEventListener("resize",o),()=>{e.removeEventListener("scroll",o),window.removeEventListener("resize",o)}},[o]),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{ref:n,className:"flex gap-4 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-neutral-600 scrollbar-track-neutral-800",children:t.map((e,t)=>(0,a.jsx)(r.E.div,{className:"flex-shrink-0 w-80",whileHover:{y:-4,scale:1.02},children:(0,a.jsx)(Z,{persona:e,index:t})},e.id))}),(0,a.jsxs)(c.M,{children:[s.canScrollRight&&(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:.75},exit:{opacity:0},transition:{duration:.3},className:"absolute top-0 right-0 bg-gradient-to-l from-neutral-900 to-transparent w-16 h-full pointer-events-none"}),s.canScrollLeft&&(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:.75},exit:{opacity:0},transition:{duration:.3},className:"absolute top-0 left-0 bg-gradient-to-r from-neutral-900 to-transparent w-16 h-full pointer-events-none"})]})]})}function eF(){let{t:e}=J();return(0,a.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"insightsuite-card h-32 animate-pulse",children:[(0,a.jsx)("div",{className:"skeleton h-4 w-24 mb-3"}),(0,a.jsx)("div",{className:"skeleton h-8 w-32 mb-2"}),(0,a.jsx)("div",{className:"skeleton h-3 w-40"})]},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-8",children:(0,a.jsxs)("div",{className:"insightsuite-card h-[500px] animate-pulse",children:[(0,a.jsx)("div",{className:"skeleton h-6 w-40 mb-4"}),(0,a.jsx)("div",{className:"skeleton h-full rounded-xl"})]})}),(0,a.jsx)("div",{className:"lg:col-span-4",children:(0,a.jsxs)("div",{className:"insightsuite-card h-[500px] animate-pulse",children:[(0,a.jsx)("div",{className:"skeleton h-6 w-40 mb-4"}),(0,a.jsx)("div",{className:"skeleton h-full rounded-xl"})]})})]}),(0,a.jsx)("div",{className:"text-center text-neutral-500",children:e("app.loading")})]})}}},function(e){e.O(0,[930,681,452,744],function(){return e(e.s=28253)}),_N_E=e.O()}]);
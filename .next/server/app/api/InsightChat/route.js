"use strict";(()=>{var e={};e.id=50,e.ids=[50],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6317:(e,t,r)=>{let s,n,i;r.r(t),r.d(t,{headerHooks:()=>rr,originalPathname:()=>rn,patchFetch:()=>ri,requestAsyncStorage:()=>t7,routeModule:()=>t9,serverHooks:()=>rt,staticGenerationAsyncStorage:()=>re,staticGenerationBailout:()=>rs});var a,o,l,u,h,c,d,p,f,m,g,y,b,w,_,v,k,x,S,P,R,j,O,$,A,M,L,I,C,T,E,N,q,U,W,H,D,F,X,J,B,K,z,V,G,Q,Y,Z,ee,et,er,es,en,ei={};r.r(ei),r.d(ei,{POST:()=>t8});var ea=r(6084),eo=r(8179),el=r(3075),eu=r(1945);function eh(e,t,r,s,n){if("m"===s)throw TypeError("Private method is not writable");if("a"===s&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r}function ec(e,t,r,s){if("a"===r&&!s)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)}let ed=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return ed=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),r=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^r()&15>>+e/4).toString(16))};function ep(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let ef=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class em extends Error{}class eg extends em{constructor(e,t,r,s){super(`${eg.makeMessage(e,t,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("request-id"),this.error=t}static makeMessage(e,t,r){let s=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,r,s){return e&&s?400===e?new e_(e,t,r,s):401===e?new ev(e,t,r,s):403===e?new ek(e,t,r,s):404===e?new ex(e,t,r,s):409===e?new eS(e,t,r,s):422===e?new eP(e,t,r,s):429===e?new eR(e,t,r,s):e>=500?new ej(e,t,r,s):new eg(e,t,r,s):new eb({message:r,cause:ef(t)})}}class ey extends eg{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class eb extends eg{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ew extends eb{constructor({message:e}={}){super({message:e??"Request timed out."})}}class e_ extends eg{}class ev extends eg{}class ek extends eg{}class ex extends eg{}class eS extends eg{}class eP extends eg{}class eR extends eg{}class ej extends eg{}let eO=/^[a-z][a-z0-9+.-]*:/i,e$=e=>eO.test(e),eA=e=>(eA=Array.isArray)(e),eM=eA;function eL(e){return"object"!=typeof e?{}:e??{}}let eI=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new em(`${e} must be an integer`);if(t<0)throw new em(`${e} must be a positive integer`);return t},eC=e=>{try{return JSON.parse(e)}catch(e){return}},eT=e=>new Promise(t=>setTimeout(t,e)),eE="0.60.0",eN=()=>!1,eq=()=>{let e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eE,"X-Stainless-OS":eW(Deno.build.os),"X-Stainless-Arch":eU(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eE,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eE,"X-Stainless-OS":eW(globalThis.process.platform??"unknown"),"X-Stainless-Arch":eU(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let r=t.exec(navigator.userAgent);if(r){let t=r[1]||0,s=r[2]||0,n=r[3]||0;return{browser:e,version:`${t}.${s}.${n}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eE,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eE,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},eU=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",eW=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",eH=()=>s??(s=eq());function eD(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function eF(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return eD({start(){},async pull(e){let{done:r,value:s}=await t.next();r?e.close():e.enqueue(s)},async cancel(){await t.return?.()}})}function eX(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function eJ(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}let t=e.getReader(),r=t.cancel();t.releaseLock(),await r}let eB=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});function eK(e){let t;return(n??(n=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function ez(e){let t;return(i??(i=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class eV{constructor(){a.set(this,void 0),o.set(this,void 0),eh(this,a,new Uint8Array,"f"),eh(this,o,null,"f")}decode(e){let t;if(null==e)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?eK(e):e;eh(this,a,function(e){let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t),s=0;for(let t of e)r.set(t,s),s+=t.length;return r}([ec(this,a,"f"),r]),"f");let s=[];for(;null!=(t=function(e,t){for(let r=t??0;r<e.length;r++){if(10===e[r])return{preceding:r,index:r+1,carriage:!1};if(13===e[r])return{preceding:r,index:r+1,carriage:!0}}return null}(ec(this,a,"f"),ec(this,o,"f")));){if(t.carriage&&null==ec(this,o,"f")){eh(this,o,t.index,"f");continue}if(null!=ec(this,o,"f")&&(t.index!==ec(this,o,"f")+1||t.carriage)){s.push(ez(ec(this,a,"f").subarray(0,ec(this,o,"f")-1))),eh(this,a,ec(this,a,"f").subarray(ec(this,o,"f")),"f"),eh(this,o,null,"f");continue}let e=null!==ec(this,o,"f")?t.preceding-1:t.preceding,r=ez(ec(this,a,"f").subarray(0,e));s.push(r),eh(this,a,ec(this,a,"f").subarray(t.index),"f"),eh(this,o,null,"f")}return s}flush(){return ec(this,a,"f").length?this.decode("\n"):[]}}a=new WeakMap,o=new WeakMap,eV.NEWLINE_CHARS=new Set(["\n","\r"]),eV.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let eG={off:0,error:200,warn:300,info:400,debug:500},eQ=(e,t,r)=>{if(e){if(Object.prototype.hasOwnProperty.call(eG,e))return e;e2(r).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(eG))}`)}};function eY(){}function eZ(e,t,r){return!t||eG[e]>eG[r]?eY:t[e].bind(t)}let e0={error:eY,warn:eY,info:eY,debug:eY},e1=new WeakMap;function e2(e){let t=e.logger,r=e.logLevel??"off";if(!t)return e0;let s=e1.get(t);if(s&&s[0]===r)return s[1];let n={error:eZ("error",t,r),warn:eZ("warn",t,r),info:eZ("info",t,r),debug:eZ("debug",t,r)};return e1.set(t,[r,n]),n}let e4=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class e5{constructor(e,t,r){this.iterator=e,l.set(this,void 0),this.controller=t,eh(this,l,r,"f")}static fromSSEResponse(e,t,r){let s=!1,n=r?e2(r):console;return new e5(async function*(){if(s)throw new em("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let r=!1;try{for await(let r of e3(e,t)){if("completion"===r.event)try{yield JSON.parse(r.data)}catch(e){throw n.error("Could not parse message into JSON:",r.data),n.error("From chunk:",r.raw),e}if("message_start"===r.event||"message_delta"===r.event||"message_stop"===r.event||"content_block_start"===r.event||"content_block_delta"===r.event||"content_block_stop"===r.event)try{yield JSON.parse(r.data)}catch(e){throw n.error("Could not parse message into JSON:",r.data),n.error("From chunk:",r.raw),e}if("ping"!==r.event&&"error"===r.event)throw new eg(void 0,eC(r.data)??r.data,void 0,e.headers)}r=!0}catch(e){if(ep(e))return;throw e}finally{r||t.abort()}},t,r)}static fromReadableStream(e,t,r){let s=!1;async function*n(){let t=new eV;for await(let r of eX(e))for(let e of t.decode(r))yield e;for(let e of t.flush())yield e}return new e5(async function*(){if(s)throw new em("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let e=!1;try{for await(let t of n())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(ep(e))return;throw e}finally{e||t.abort()}},t,r)}[(l=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),s=s=>({next:()=>{if(0===s.length){let s=r.next();e.push(s),t.push(s)}return s.shift()}});return[new e5(()=>s(e),this.controller,ec(this,l,"f")),new e5(()=>s(t),this.controller,ec(this,l,"f"))]}toReadableStream(){let e;let t=this;return eD({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:r,done:s}=await e.next();if(s)return t.close();let n=eK(JSON.stringify(r)+"\n");t.enqueue(n)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*e3(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new em("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new em("Attempted to iterate over a response with no body")}let r=new e8,s=new eV;for await(let t of e6(eX(e.body)))for(let e of s.decode(t)){let t=r.decode(e);t&&(yield t)}for(let e of s.flush()){let t=r.decode(e);t&&(yield t)}}async function*e6(e){let t=new Uint8Array;for await(let r of e){let e;if(null==r)continue;let s=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?eK(r):r,n=new Uint8Array(t.length+s.length);for(n.set(t),n.set(s,t.length),t=n;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class e8{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,s]=function(e,t){let r=e.indexOf(t);return -1!==r?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}(e,":");return s.startsWith(" ")&&(s=s.substring(1)),"event"===t?this.event=s:"data"===t&&this.data.push(s),null}}async function e9(e,t){let{response:r,requestLogID:s,retryOfRequestLogID:n,startTime:i}=t,a=await (async()=>{if(t.options.stream)return(e2(e).debug("response",r.status,r.url,r.headers,r.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(r,t.controller):e5.fromSSEResponse(r,t.controller);if(204===r.status)return null;if(t.options.__binaryResponse)return r;let s=r.headers.get("content-type"),n=s?.split(";")[0]?.trim();return n?.includes("application/json")||n?.endsWith("+json")?e7(await r.json(),r):await r.text()})();return e2(e).debug(`[${s}] response parsed`,e4({retryOfRequestLogID:n,url:r.url,status:r.status,body:a,durationMs:Date.now()-i})),a}function e7(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class te extends Promise{constructor(e,t,r=e9){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=r,u.set(this,void 0),eh(this,u,e,"f")}_thenUnwrap(e){return new te(ec(this,u,"f"),this.responsePromise,async(t,r)=>e7(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ec(this,u,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}u=new WeakMap;class tt{constructor(e,t,r,s){h.set(this,void 0),eh(this,h,e,"f"),this.options=s,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new em("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ec(this,h,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(h=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class tr extends te{constructor(e,t,r){super(e,t,async(e,t)=>new r(e,t.response,await e9(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class ts extends tt{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let e=this.first_id;return e?{...this.options,query:{...eL(this.options.query),before_id:e}}:null}let e=this.last_id;return e?{...this.options,query:{...eL(this.options.query),after_id:e}}:null}}let tn=()=>{if("undefined"==typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ti(e,t,r){return tn(),new File(e,t??"unknown_file",r)}function ta(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}let to=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],tl=async(e,t)=>({...e,body:await th(e.body,t)}),tu=new WeakMap,th=async(e,t)=>{if(!await function(e){let t="function"==typeof e?e:e.fetch,r=tu.get(t);if(r)return r;let s=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;if(r.toString()===await new e(r).text())return!1;return!0}catch{return!0}})();return tu.set(t,s),s}(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>tf(r,e,t))),r},tc=e=>e instanceof Blob&&"name"in e,td=e=>"object"==typeof e&&null!==e&&(e instanceof Response||to(e)||tc(e)),tp=e=>{if(td(e))return!0;if(Array.isArray(e))return e.some(tp);if(e&&"object"==typeof e){for(let t in e)if(tp(e[t]))return!0}return!1},tf=async(e,t,r)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(r instanceof Response){let s={},n=r.headers.get("Content-Type");n&&(s={type:n}),e.append(t,ti([await r.blob()],ta(r),s))}else if(to(r))e.append(t,ti([await new Response(eF(r)).blob()],ta(r)));else if(tc(r))e.append(t,ti([r],ta(r),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(r=>tf(e,t+"[]",r)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,s])=>tf(e,`${t}[${r}]`,s)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},tm=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,tg=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&tm(e),ty=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob;async function tb(e,t,r){if(tn(),e=await e,t||(t=ta(e)),tg(e))return e instanceof File&&null==t&&null==r?e:ti([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...r});if(ty(e)){let s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),ti(await tw(s),t,r)}let s=await tw(e);if(!r?.type){let e=s.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(r={...r,type:e})}return ti(s,t,r)}async function tw(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(tm(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(to(e))for await(let r of e)t.push(...await tw(r));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class t_{constructor(e){this._client=e}}let tv=Symbol.for("brand.privateNullableHeaders"),tk=e=>{let t=new Headers,r=new Set;for(let s of e){let e=new Set;for(let[n,i]of function*(e){let t;if(!e)return;if(tv in e){let{values:t,nulls:r}=e;for(let e of(yield*t.entries(),r))yield[e,null];return}let r=!1;for(let s of(e instanceof Headers?t=e.entries():eM(e)?t=e:(r=!0,t=Object.entries(e??{})),t)){let e=s[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=eM(s[1])?s[1]:[s[1]],n=!1;for(let s of t)void 0!==s&&(r&&!n&&(n=!0,yield[e,null]),yield[e,s])}}(s)){let s=n.toLowerCase();e.has(s)||(t.delete(n),e.add(s)),null===i?(t.delete(n),r.add(s)):(t.append(n,i),r.delete(s))}}return{[tv]:!0,values:t,nulls:r}};function tx(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let tS=Object.freeze(Object.create(null)),tP=((e=tx)=>function(t,...r){let s;if(1===t.length)return t[0];let n=!1,i=[],a=t.reduce((t,s,a)=>{/[?#]/.test(s)&&(n=!0);let o=r[a],l=(n?encodeURIComponent:e)(""+o);return a!==r.length&&(null==o||"object"==typeof o&&o.toString===Object.getPrototypeOf(Object.getPrototypeOf(o.hasOwnProperty??tS)??tS)?.toString)&&(l=o+"",i.push({start:t.length+s.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(o).slice(8,-1)} is not a valid path parameter`})),t+s+(a===r.length?"":l)},""),o=a.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(s=l.exec(o));)i.push({start:s.index,length:s[0].length,error:`Value "${s[0]}" can't be safely passed as a path parameter`});if(i.sort((e,t)=>e.start-t.start),i.length>0){let e=0,t=i.reduce((t,r)=>{let s=" ".repeat(r.start-e),n="^".repeat(r.length);return e=r.start+r.length,t+s+n},"");throw new em(`Path parameters result in path with invalid segments:
${i.map(e=>e.error).join("\n")}
${a}
${t}`)}return a})(tx);class tR extends t_{list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/files",ts,{query:s,...t,headers:tk([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},r){let{betas:s}=t??{};return this._client.delete(tP`/v1/files/${e}`,{...r,headers:tk([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},r?.headers])})}download(e,t={},r){let{betas:s}=t??{};return this._client.get(tP`/v1/files/${e}/content`,{...r,headers:tk([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},r){let{betas:s}=t??{};return this._client.get(tP`/v1/files/${e}`,{...r,headers:tk([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},r?.headers])})}upload(e,t){let{betas:r,...s}=e;return this._client.post("/v1/files",tl({body:s,...t,headers:tk([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}class tj extends t_{retrieve(e,t={},r){let{betas:s}=t??{};return this._client.get(tP`/v1/models/${e}?beta=true`,{...r,headers:tk([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},r?.headers])})}list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/models?beta=true",ts,{query:s,...t,headers:tk([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},t?.headers])})}}class tO{constructor(e,t){this.iterator=e,this.controller=t}async *decoder(){let e=new eV;for await(let t of this.iterator)for(let r of e.decode(t))yield JSON.parse(r);for(let t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new em("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new em("Attempted to iterate over a response with no body")}return new tO(eX(e.body),t)}}class t$ extends t_{create(e,t){let{betas:r,...s}=e;return this._client.post("/v1/messages/batches?beta=true",{body:s,...t,headers:tk([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},r){let{betas:s}=t??{};return this._client.get(tP`/v1/messages/batches/${e}?beta=true`,{...r,headers:tk([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",ts,{query:s,...t,headers:tk([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},r){let{betas:s}=t??{};return this._client.delete(tP`/v1/messages/batches/${e}?beta=true`,{...r,headers:tk([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}cancel(e,t={},r){let{betas:s}=t??{};return this._client.post(tP`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:tk([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}async results(e,t={},r){let s=await this.retrieve(e);if(!s.results_url)throw new em(`No batch \`results_url\`; Has it finished processing? ${s.processing_status} - ${s.id}`);let{betas:n}=t??{};return this._client.get(s.results_url,{...r,headers:tk([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>tO.fromResponse(t.response,t.controller))}}let tA=e=>{let t=0,r=[];for(;t<e.length;){let s=e[t];if("\\"===s){t++;continue}if("{"===s){r.push({type:"brace",value:"{"}),t++;continue}if("}"===s){r.push({type:"brace",value:"}"}),t++;continue}if("["===s){r.push({type:"paren",value:"["}),t++;continue}if("]"===s){r.push({type:"paren",value:"]"}),t++;continue}if(":"===s){r.push({type:"separator",value:":"}),t++;continue}if(","===s){r.push({type:"delimiter",value:","}),t++;continue}if('"'===s){let n="",i=!1;for(s=e[++t];'"'!==s;){if(t===e.length){i=!0;break}if("\\"===s){if(++t===e.length){i=!0;break}n+=s+e[t],s=e[++t]}else n+=s,s=e[++t]}s=e[++t],i||r.push({type:"string",value:n});continue}let n=/\s/;if(s&&n.test(s)){t++;continue}let i=/[0-9]/;if(s&&i.test(s)||"-"===s||"."===s){let n="";for("-"===s&&(n+=s,s=e[++t]);s&&i.test(s)||"."===s;)n+=s,s=e[++t];r.push({type:"number",value:n});continue}let a=/[a-z]/i;if(s&&a.test(s)){let n="";for(;s&&a.test(s)&&t!==e.length;)n+=s,s=e[++t];"true"==n||"false"==n||"null"===n?r.push({type:"name",value:n}):t++;continue}t++}return r},tM=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return tM(e=e.slice(0,e.length-1));case"number":let r=t.value[t.value.length-1];if("."===r||"-"===r)return tM(e=e.slice(0,e.length-1));case"string":let s=e[e.length-2];if(s?.type==="delimiter"||s?.type==="brace"&&"{"===s.value)return tM(e=e.slice(0,e.length-1));break;case"delimiter":return tM(e=e.slice(0,e.length-1))}return e},tL=e=>{let t=[];return e.map(e=>{"brace"===e.type&&("{"===e.value?t.push("}"):t.splice(t.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(t=>{"}"===t?e.push({type:"brace",value:"}"}):"]"===t&&e.push({type:"paren",value:"]"})}),e},tI=e=>{let t="";return e.map(e=>{"string"===e.type?t+='"'+e.value+'"':t+=e.value}),t},tC=e=>JSON.parse(tI(tL(tM(tA(e))))),tT="__json_buf";function tE(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class tN{constructor(){c.add(this),this.messages=[],this.receivedMessages=[],d.set(this,void 0),this.controller=new AbortController,p.set(this,void 0),f.set(this,()=>{}),m.set(this,()=>{}),g.set(this,void 0),y.set(this,()=>{}),b.set(this,()=>{}),w.set(this,{}),_.set(this,!1),v.set(this,!1),k.set(this,!1),x.set(this,!1),S.set(this,void 0),P.set(this,void 0),O.set(this,e=>{if(eh(this,v,!0,"f"),ep(e)&&(e=new ey),e instanceof ey)return eh(this,k,!0,"f"),this._emit("abort",e);if(e instanceof em)return this._emit("error",e);if(e instanceof Error){let t=new em(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new em(String(e)))}),eh(this,p,new Promise((e,t)=>{eh(this,f,e,"f"),eh(this,m,t,"f")}),"f"),eh(this,g,new Promise((e,t)=>{eh(this,y,e,"f"),eh(this,b,t,"f")}),"f"),ec(this,p,"f").catch(()=>{}),ec(this,g,"f").catch(()=>{})}get response(){return ec(this,S,"f")}get request_id(){return ec(this,P,"f")}async withResponse(){let e=await ec(this,p,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new tN;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r){let s=new tN;for(let e of t.messages)s._addMessageParam(e);return s._run(()=>s._createMessage(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ec(this,O,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,r){let s;let n=r?.signal;n&&(n.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),n.addEventListener("abort",s));try{ec(this,c,"m",$).call(this);let{response:s,data:n}=await e.create({...t,stream:!0},{...r,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(s),n))ec(this,c,"m",A).call(this,e);if(n.controller.signal?.aborted)throw new ey;ec(this,c,"m",M).call(this)}finally{n&&s&&n.removeEventListener("abort",s)}}_connected(e){this.ended||(eh(this,S,e,"f"),eh(this,P,e?.headers.get("request-id"),"f"),ec(this,f,"f").call(this,e),this._emit("connect"))}get ended(){return ec(this,_,"f")}get errored(){return ec(this,v,"f")}get aborted(){return ec(this,k,"f")}abort(){this.controller.abort()}on(e,t){return(ec(this,w,"f")[e]||(ec(this,w,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=ec(this,w,"f")[e];if(!r)return this;let s=r.findIndex(e=>e.listener===t);return s>=0&&r.splice(s,1),this}once(e,t){return(ec(this,w,"f")[e]||(ec(this,w,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{eh(this,x,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){eh(this,x,!0,"f"),await ec(this,g,"f")}get currentMessage(){return ec(this,d,"f")}async finalMessage(){return await this.done(),ec(this,c,"m",R).call(this)}async finalText(){return await this.done(),ec(this,c,"m",j).call(this)}_emit(e,...t){if(ec(this,_,"f"))return;"end"===e&&(eh(this,_,!0,"f"),ec(this,y,"f").call(this));let r=ec(this,w,"f")[e];if(r&&(ec(this,w,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];ec(this,x,"f")||r?.length||Promise.reject(e),ec(this,m,"f").call(this,e),ec(this,b,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];ec(this,x,"f")||r?.length||Promise.reject(e),ec(this,m,"f").call(this,e),ec(this,b,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ec(this,c,"m",R).call(this))}async _fromReadableStream(e,t){let r;let s=t?.signal;s&&(s.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),s.addEventListener("abort",r));try{ec(this,c,"m",$).call(this),this._connected(null);let t=e5.fromReadableStream(e,this.controller);for await(let e of t)ec(this,c,"m",A).call(this,e);if(t.controller.signal?.aborted)throw new ey;ec(this,c,"m",M).call(this)}finally{s&&r&&s.removeEventListener("abort",r)}}[(d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,_=new WeakMap,v=new WeakMap,k=new WeakMap,x=new WeakMap,S=new WeakMap,P=new WeakMap,O=new WeakMap,c=new WeakSet,R=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},j=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new em("stream ended without producing a content block with type=text");return e.join(" ")},$=function(){this.ended||eh(this,d,void 0,"f")},A=function(e){if(this.ended)return;let t=ec(this,c,"m",L).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",e.delta.citation,r.citations??[]);break;case"input_json_delta":tE(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":eh(this,d,t,"f")}},M=function(){if(this.ended)throw new em("stream has ended, this shouldn't happen");let e=ec(this,d,"f");if(!e)throw new em("request ended without sending any chunks");return eh(this,d,void 0,"f"),e},L=function(e){let t=ec(this,d,"f");if("message_start"===e.type){if(t)throw new em(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new em(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let r=t.content.at(e.index);switch(e.delta.type){case"text_delta":r?.type==="text"&&(t.content[e.index]={...r,text:(r.text||"")+e.delta.text});break;case"citations_delta":r?.type==="text"&&(t.content[e.index]={...r,citations:[...r.citations??[],e.delta.citation]});break;case"input_json_delta":if(r&&tE(r)){let s=r[tT]||"";s+=e.delta.partial_json;let n={...r};if(Object.defineProperty(n,tT,{value:s,enumerable:!1,writable:!0}),s)try{n.input=tC(s)}catch(t){let e=new em(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${t}. JSON: ${s}`);ec(this,O,"f").call(this,e)}t.content[e.index]=n}break;case"thinking_delta":r?.type==="thinking"&&(t.content[e.index]={...r,thinking:r.thinking+e.delta.thinking});break;case"signature_delta":r?.type==="thinking"&&(t.content[e.index]={...r,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("streamEvent",r=>{let s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),this.on("error",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new e5(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}let tq={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192},tU={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};class tW extends t_{constructor(){super(...arguments),this.batches=new t$(this._client)}create(e,t){let{betas:r,...s}=e;s.model in tU&&console.warn(`The model '${s.model}' is deprecated and will reach end-of-life on ${tU[s.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!s.stream&&null==n){let e=tq[s.model]??void 0;n=this._client.calculateNonstreamingTimeout(s.max_tokens,e)}return this._client.post("/v1/messages?beta=true",{body:s,timeout:n??6e5,...t,headers:tk([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}stream(e,t){return tN.createMessage(this,e,t)}countTokens(e,t){let{betas:r,...s}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:s,...t,headers:tk([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},t?.headers])})}}tW.Batches=t$;class tH extends t_{constructor(){super(...arguments),this.models=new tj(this._client),this.messages=new tW(this._client),this.files=new tR(this._client)}}tH.Models=tj,tH.Messages=tW,tH.Files=tR;class tD extends t_{create(e,t){let{betas:r,...s}=e;return this._client.post("/v1/complete",{body:s,timeout:this._client._options.timeout??6e5,...t,headers:tk([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}let tF="__json_buf";function tX(e){return"tool_use"===e.type||"server_tool_use"===e.type}class tJ{constructor(){I.add(this),this.messages=[],this.receivedMessages=[],C.set(this,void 0),this.controller=new AbortController,T.set(this,void 0),E.set(this,()=>{}),N.set(this,()=>{}),q.set(this,void 0),U.set(this,()=>{}),W.set(this,()=>{}),H.set(this,{}),D.set(this,!1),F.set(this,!1),X.set(this,!1),J.set(this,!1),B.set(this,void 0),K.set(this,void 0),G.set(this,e=>{if(eh(this,F,!0,"f"),ep(e)&&(e=new ey),e instanceof ey)return eh(this,X,!0,"f"),this._emit("abort",e);if(e instanceof em)return this._emit("error",e);if(e instanceof Error){let t=new em(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new em(String(e)))}),eh(this,T,new Promise((e,t)=>{eh(this,E,e,"f"),eh(this,N,t,"f")}),"f"),eh(this,q,new Promise((e,t)=>{eh(this,U,e,"f"),eh(this,W,t,"f")}),"f"),ec(this,T,"f").catch(()=>{}),ec(this,q,"f").catch(()=>{})}get response(){return ec(this,B,"f")}get request_id(){return ec(this,K,"f")}async withResponse(){let e=await ec(this,T,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new tJ;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r){let s=new tJ;for(let e of t.messages)s._addMessageParam(e);return s._run(()=>s._createMessage(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},ec(this,G,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,r){let s;let n=r?.signal;n&&(n.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),n.addEventListener("abort",s));try{ec(this,I,"m",Q).call(this);let{response:s,data:n}=await e.create({...t,stream:!0},{...r,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(s),n))ec(this,I,"m",Y).call(this,e);if(n.controller.signal?.aborted)throw new ey;ec(this,I,"m",Z).call(this)}finally{n&&s&&n.removeEventListener("abort",s)}}_connected(e){this.ended||(eh(this,B,e,"f"),eh(this,K,e?.headers.get("request-id"),"f"),ec(this,E,"f").call(this,e),this._emit("connect"))}get ended(){return ec(this,D,"f")}get errored(){return ec(this,F,"f")}get aborted(){return ec(this,X,"f")}abort(){this.controller.abort()}on(e,t){return(ec(this,H,"f")[e]||(ec(this,H,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=ec(this,H,"f")[e];if(!r)return this;let s=r.findIndex(e=>e.listener===t);return s>=0&&r.splice(s,1),this}once(e,t){return(ec(this,H,"f")[e]||(ec(this,H,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{eh(this,J,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){eh(this,J,!0,"f"),await ec(this,q,"f")}get currentMessage(){return ec(this,C,"f")}async finalMessage(){return await this.done(),ec(this,I,"m",z).call(this)}async finalText(){return await this.done(),ec(this,I,"m",V).call(this)}_emit(e,...t){if(ec(this,D,"f"))return;"end"===e&&(eh(this,D,!0,"f"),ec(this,U,"f").call(this));let r=ec(this,H,"f")[e];if(r&&(ec(this,H,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];ec(this,J,"f")||r?.length||Promise.reject(e),ec(this,N,"f").call(this,e),ec(this,W,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];ec(this,J,"f")||r?.length||Promise.reject(e),ec(this,N,"f").call(this,e),ec(this,W,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",ec(this,I,"m",z).call(this))}async _fromReadableStream(e,t){let r;let s=t?.signal;s&&(s.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),s.addEventListener("abort",r));try{ec(this,I,"m",Q).call(this),this._connected(null);let t=e5.fromReadableStream(e,this.controller);for await(let e of t)ec(this,I,"m",Y).call(this,e);if(t.controller.signal?.aborted)throw new ey;ec(this,I,"m",Z).call(this)}finally{s&&r&&s.removeEventListener("abort",r)}}[(C=new WeakMap,T=new WeakMap,E=new WeakMap,N=new WeakMap,q=new WeakMap,U=new WeakMap,W=new WeakMap,H=new WeakMap,D=new WeakMap,F=new WeakMap,X=new WeakMap,J=new WeakMap,B=new WeakMap,K=new WeakMap,G=new WeakMap,I=new WeakSet,z=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},V=function(){if(0===this.receivedMessages.length)throw new em("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new em("stream ended without producing a content block with type=text");return e.join(" ")},Q=function(){this.ended||eh(this,C,void 0,"f")},Y=function(e){if(this.ended)return;let t=ec(this,I,"m",ee).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",e.delta.citation,r.citations??[]);break;case"input_json_delta":tX(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":eh(this,C,t,"f")}},Z=function(){if(this.ended)throw new em("stream has ended, this shouldn't happen");let e=ec(this,C,"f");if(!e)throw new em("request ended without sending any chunks");return eh(this,C,void 0,"f"),e},ee=function(e){let t=ec(this,C,"f");if("message_start"===e.type){if(t)throw new em(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new em(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push({...e.content_block}),t;case"content_block_delta":{let r=t.content.at(e.index);switch(e.delta.type){case"text_delta":r?.type==="text"&&(t.content[e.index]={...r,text:(r.text||"")+e.delta.text});break;case"citations_delta":r?.type==="text"&&(t.content[e.index]={...r,citations:[...r.citations??[],e.delta.citation]});break;case"input_json_delta":if(r&&tX(r)){let s=r[tF]||"";s+=e.delta.partial_json;let n={...r};Object.defineProperty(n,tF,{value:s,enumerable:!1,writable:!0}),s&&(n.input=tC(s)),t.content[e.index]=n}break;case"thinking_delta":r?.type==="thinking"&&(t.content[e.index]={...r,thinking:r.thinking+e.delta.thinking});break;case"signature_delta":r?.type==="thinking"&&(t.content[e.index]={...r,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("streamEvent",r=>{let s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),this.on("error",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new e5(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class tB extends t_{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(tP`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",ts,{query:e,...t})}delete(e,t){return this._client.delete(tP`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(tP`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){let r=await this.retrieve(e);if(!r.results_url)throw new em(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...t,headers:tk([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>tO.fromResponse(t.response,t.controller))}}class tK extends t_{constructor(){super(...arguments),this.batches=new tB(this._client)}create(e,t){e.model in tz&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${tz[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!e.stream&&null==r){let t=tq[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...t,stream:e.stream??!1})}stream(e,t){return tJ.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}let tz={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};tK.Batches=tB;class tV extends t_{retrieve(e,t={},r){let{betas:s}=t??{};return this._client.get(tP`/v1/models/${e}`,{...r,headers:tk([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},r?.headers])})}list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/models",ts,{query:s,...t,headers:tk([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},t?.headers])})}}let tG=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class tQ{constructor({baseURL:e=tG("ANTHROPIC_BASE_URL"),apiKey:t=tG("ANTHROPIC_API_KEY")??null,authToken:r=tG("ANTHROPIC_AUTH_TOKEN")??null,...s}={}){et.add(this),es.set(this,void 0);let n={apiKey:t,authToken:r,...s,baseURL:e||"https://api.anthropic.com"};if(!n.dangerouslyAllowBrowser&&eN())throw new em("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=n.baseURL,this.timeout=n.timeout??er.DEFAULT_TIMEOUT,this.logger=n.logger??console;let i="warn";this.logLevel=i,this.logLevel=eQ(n.logLevel,"ClientOptions.logLevel",this)??eQ(tG("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??i,this.fetchOptions=n.fetchOptions,this.maxRetries=n.maxRetries??2,this.fetch=n.fetch??function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),eh(this,es,eB,"f"),this._options=n,this.apiKey=t,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization")||t.has("authorization")))throw Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return tk([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return tk([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return tk([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new em(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${eE}`}defaultIdempotencyKey(){return`stainless-node-retry-${ed()}`}makeStatusError(e,t,r,s){return eg.generate(e,t,r,s)}buildURL(e,t,r){let s=!ec(this,et,"m",en).call(this)&&r||this.baseURL,n=new URL(e$(e)?e:s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(i)&&(t={...i,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new em("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new te(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){let s=await e,n=s.maxRetries??this.maxRetries;null==t&&(t=n),await this.prepareOptions(s);let{req:i,url:a,timeout:o}=await this.buildRequest(s,{retryCount:n-t});await this.prepareRequest(i,{url:a,options:s});let l="log_"+(16777216*Math.random()|0).toString(16).padStart(6,"0"),u=void 0===r?"":`, retryOf: ${r}`,h=Date.now();if(e2(this).debug(`[${l}] sending request`,e4({retryOfRequestLogID:r,method:s.method,url:a,options:s,headers:i.headers})),s.signal?.aborted)throw new ey;let c=new AbortController,d=await this.fetchWithTimeout(a,i,o,c).catch(ef),p=Date.now();if(d instanceof Error){let e=`retrying, ${t} attempts remaining`;if(s.signal?.aborted)throw new ey;let n=ep(d)||/timed? ?out/i.test(String(d)+("cause"in d?String(d.cause):""));if(t)return e2(this).info(`[${l}] connection ${n?"timed out":"failed"} - ${e}`),e2(this).debug(`[${l}] connection ${n?"timed out":"failed"} (${e})`,e4({retryOfRequestLogID:r,url:a,durationMs:p-h,message:d.message})),this.retryRequest(s,t,r??l);if(e2(this).info(`[${l}] connection ${n?"timed out":"failed"} - error; no more retries left`),e2(this).debug(`[${l}] connection ${n?"timed out":"failed"} (error; no more retries left)`,e4({retryOfRequestLogID:r,url:a,durationMs:p-h,message:d.message})),n)throw new ew;throw new eb({cause:d})}let f=[...d.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),m=`[${l}${u}${f}] ${i.method} ${a} ${d.ok?"succeeded":"failed"} with status ${d.status} in ${p-h}ms`;if(!d.ok){let e=await this.shouldRetry(d);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await eJ(d.body),e2(this).info(`${m} - ${e}`),e2(this).debug(`[${l}] response error (${e})`,e4({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,durationMs:p-h})),this.retryRequest(s,t,r??l,d.headers)}let n=e?"error; no more retries left":"error; not retryable";e2(this).info(`${m} - ${n}`);let i=await d.text().catch(e=>ef(e).message),a=eC(i),o=a?void 0:i;throw e2(this).debug(`[${l}] response error (${n})`,e4({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,message:o,durationMs:Date.now()-h})),this.makeStatusError(d.status,a,o,d.headers)}return e2(this).info(m),e2(this).debug(`[${l}] response start`,e4({retryOfRequestLogID:r,url:d.url,status:d.status,headers:d.headers,durationMs:p-h})),{response:d,options:s,controller:c,requestLogID:l,retryOfRequestLogID:r,startTime:h}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){return new tr(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,r,s){let{signal:n,method:i,...a}=t||{};n&&n.addEventListener("abort",()=>s.abort());let o=setTimeout(()=>s.abort(),r),l=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||"object"==typeof a.body&&null!==a.body&&Symbol.asyncIterator in a.body,u={signal:s.signal,...l?{duplex:"half"}:{},method:"GET",...a};i&&(u.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(o)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r,s){let n;let i=s?.get("retry-after-ms");if(i){let e=parseFloat(i);Number.isNaN(e)||(n=e)}let a=s?.get("retry-after");if(a&&!n){let e=parseFloat(a);n=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){let r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await eT(n),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||null!=t&&e>t)throw new em("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:t=0}={}){let r={...e},{method:s,path:n,query:i,defaultBaseURL:a}=r,o=this.buildURL(n,i,a);"timeout"in r&&eI("timeout",r.timeout),r.timeout=r.timeout??this.timeout;let{bodyHeaders:l,body:u}=this.buildBody({options:r}),h=await this.buildHeaders({options:e,method:s,bodyHeaders:l,retryCount:t});return{req:{method:s,headers:h,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...r.fetchOptions??{}},url:o,timeout:r.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:s}){let n={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),n[this.idempotencyHeader]=e.idempotencyKey);let i=tk([n,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...eH(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let r=tk([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:eF(e)}:ec(this,es,"f").call(this,{body:e,headers:r})}}er=tQ,es=new WeakMap,et=new WeakSet,en=function(){return"https://api.anthropic.com"!==this.baseURL},tQ.Anthropic=er,tQ.HUMAN_PROMPT="\n\nHuman:",tQ.AI_PROMPT="\n\nAssistant:",tQ.DEFAULT_TIMEOUT=6e5,tQ.AnthropicError=em,tQ.APIError=eg,tQ.APIConnectionError=eb,tQ.APIConnectionTimeoutError=ew,tQ.APIUserAbortError=ey,tQ.NotFoundError=ex,tQ.ConflictError=eS,tQ.RateLimitError=eR,tQ.BadRequestError=e_,tQ.AuthenticationError=ev,tQ.InternalServerError=ej,tQ.PermissionDeniedError=ek,tQ.UnprocessableEntityError=eP,tQ.toFile=tb;class tY extends tQ{constructor(){super(...arguments),this.completions=new tD(this),this.messages=new tK(this),this.models=new tV(this),this.beta=new tH(this)}}tY.Completions=tD,tY.Messages=tK,tY.Models=tV,tY.Beta=tH;let{HUMAN_PROMPT:tZ,AI_PROMPT:t0}=tY,t1=require("node:path");var t2=r.n(t1);let t4=require("node:fs");var t5=r.n(t4);let t3=process.env.ANTHROPIC_MODEL?.trim()||"claude-3-5-sonnet-20250106",t6={"claude-3-5-sonnet":"claude-3-5-sonnet-20250106","claude-3-5-haiku":"claude-3-5-haiku-20241022","claude-3-opus":"claude-3-opus-20240229"}[t3]??t3;async function t8(e){console.log("InsightChat API called");try{let{question:t,projectId:r}=await e.json();if(console.log("Request:",{question:t?.substring(0,50)+"...",projectId:r}),!t||!r)return console.log("Missing required parameters"),eu.Z.json({error:"Missing question or projectId"},{status:400});let s=function(e){let t=t2().join(process.cwd(),"public","demo","projects"),r=t5().readdirSync(t).filter(e=>e.endsWith(".json")),s=r.find(t=>t.toLowerCase().includes(e.toLowerCase()));if(s)return t2().join(t,s);for(let s of r)try{let r=t2().join(t,s),n=JSON.parse(t5().readFileSync(r,"utf8"));if(n?.meta?.project_id?.toLowerCase()===e.toLowerCase())return r}catch{}return null}(r);if(!s)return eu.Z.json({error:"Project not found"},{status:404});let n=JSON.parse(t5().readFileSync(s,"utf8")),i=function(e){let t=e.clusters??[],r=e.personas??[],s=e.meta??{},n=e.aggregates??{},i=e.timeseries??{},a=t.slice().sort((e,t)=>(t.share??0)-(e.share??0)).slice(0,10).map(e=>({id:e.id,label:e.label,share:e.share??0,sentiment:e.sentiment??0,opportunity_score:e.opportunity_score??0,summary:e.summary??"",strengths:e.strengths??[],weaknesses:e.weaknesses??[],keywords:e.keywords??[],trend:e.trend??[],size:e.size??0,sampleQuotes:(e.quotes??[]).slice(0,3).map(e=>e.text)})),o=r.map(e=>({title:e?.title??e?.name??e?.label??"",share:e?.share??0,goals:(e?.goals??[]).slice(0,5),pains:(e?.pains??e?.pain_points??[]).slice(0,5),behaviors:e?.behaviors??[],demographics:e?.demographics??{}})),l=t.filter(e=>!!e.trend&&!(e.trend.length<2)&&e.trend[e.trend.length-1].count<e.trend[0].count&&e.sentiment<0),u=t.filter(e=>!!e.trend&&!(e.trend.length<2)&&e.trend[e.trend.length-1].count>e.trend[0].count&&e.sentiment>0),h=i&&i.monthly&&i.monthly.length>0?i.monthly[i.monthly.length-1].sentiment_mean:void 0,c=i&&i.monthly&&i.monthly.length>1?(i.monthly[i.monthly.length-1]?.sentiment_mean??0)-(i.monthly[0]?.sentiment_mean??0):0;return{meta:s,aggregates:n,topClusters:a,allClusters:t.length,personas:o,trendingNegative:l.slice(0,3),trendingPositive:u.slice(0,3),timeseries:{hasData:!!i?.monthly&&i.monthly.length>0,latestSentiment:h,sentimentTrend:c}}}(n);if(!process.env.ANTHROPIC_API_KEY)return console.log("ANTHROPIC_API_KEY not found in environment variables"),eu.Z.json({error:"ANTHROPIC_API_KEY not configured",answer:"ANTHROPIC_API_KEY not configured - using fallback mode"},{status:200});let a=new tY({apiKey:process.env.ANTHROPIC_API_KEY}),o=`Sei un esperto analista di customer insights per ${r.toUpperCase()}. 
Rispondi in italiano in modo professionale e dettagliato. 

CONTESTO DEL PROGETTO:
- Progetto: ${i.meta.project_name||r}
- Dataset: ${i.aggregates.total_reviews?.toLocaleString()||"N/A"} recensioni
- Sentiment medio: ${i.aggregates.sentiment_mean?.toFixed(2)||"N/A"}
- Cluster identificati: ${i.allClusters}
- Personas identificate: ${i.personas.length}

TOP CLUSTER (ordinati per impatto):
${i.topClusters.map((e,t)=>`${t+1}. ${e.label} - Impact: ${(100*e.share).toFixed(1)}% - Sentiment: ${e.sentiment.toFixed(2)} - Opportunity: ${e.opportunity_score.toFixed(2)}
   Punti di forza: ${e.strengths.join(", ")}
   Criticit\xe0: ${e.weaknesses.join(", ")}
   Keywords: ${e.keywords.join(", ")}
   Quotes esempio: "${e.sampleQuotes.join('", "')}"
`).join("\n")}

PERSONAS:
${i.personas.map((e,t)=>`${t+1}. ${e.title} (${(100*e.share).toFixed(1)}% utenti)
   Obiettivi: ${e.goals.join(", ")}
   Pain Points: ${e.pains.join(", ")}
   Comportamenti: ${e.behaviors.join(", ")}
`).join("\n")}

TREND ANALYSIS:
- Cluster in miglioramento: ${i.trendingPositive.map(e=>e.label).join(", ")||"Nessuno identificato"}
- Cluster in peggioramento: ${i.trendingNegative.map(e=>e.label).join(", ")||"Nessuno identificato"}
- Sentiment trend: ${i.timeseries.sentimentTrend>0?"Positivo":i.timeseries.sentimentTrend<0?"Negativo":"Stabile"} (${i.timeseries.sentimentTrend?.toFixed(3)||"N/A"})

Rispondi alla domanda dell'utente usando questi dati. Fornisci insights dettagliati, numeri specifici, e raccomandazioni concrete quando appropriato.`,l=await a.messages.create({model:t6,max_tokens:2e3,temperature:.7,system:o,messages:[{role:"user",content:t}]}),u="text"===l.content[0].type?l.content[0].text:"Errore nel processare la risposta";return eu.Z.json({answer:u})}catch(e){return console.error("InsightChat API error:",e),eu.Z.json({error:"Internal server error"},{status:500})}}let t9=new ea.AppRouteRouteModule({definition:{kind:eo.x.APP_ROUTE,page:"/api/InsightChat/route",pathname:"/api/InsightChat",filename:"route",bundlePath:"app/api/InsightChat/route"},resolvedPagePath:"C:\\Users\\mmiranda\\Downloads\\insight-suite\\app\\api\\InsightChat\\route.ts",nextConfigOutput:"",userland:ei}),{requestAsyncStorage:t7,staticGenerationAsyncStorage:re,serverHooks:rt,headerHooks:rr,staticGenerationBailout:rs}=t9,rn="/api/InsightChat/route";function ri(){return(0,el.patchFetch)({serverHooks:rt,staticGenerationAsyncStorage:re})}},771:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i={};function a(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${r.join("; ")}`}function o(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[s,n]=[r.slice(0,e),r.slice(e+1)];try{t.set(s,decodeURIComponent(null!=n?n:"true"))}catch{}}return t}function l(e){var t,r;if(!e)return;let[[s,n],...i]=o(e),{domain:a,expires:l,httponly:c,maxage:d,path:p,samesite:f,secure:m,priority:g}=Object.fromEntries(i.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}({name:s,value:decodeURIComponent(n),domain:a,...l&&{expires:new Date(l)},...c&&{httpOnly:!0},..."string"==typeof d&&{maxAge:Number(d)},path:p,...f&&{sameSite:u.includes(t=(t=f).toLowerCase())?t:void 0},...m&&{secure:!0},...g&&{priority:h.includes(r=(r=g).toLowerCase())?r:void 0}})}((e,r)=>{for(var s in r)t(e,s,{get:r[s],enumerable:!0})})(i,{RequestCookies:()=>c,ResponseCookies:()=>d,parseCookie:()=>o,parseSetCookie:()=>l,stringifyCookie:()=>a}),e.exports=((e,i,a,o)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let a of s(i))n.call(e,a)||void 0===a||t(e,a,{get:()=>i[a],enumerable:!(o=r(i,a))||o.enumerable});return e})(t({},"__esModule",{value:!0}),i);var u=["strict","lax","none"],h=["low","medium","high"],c=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of o(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let s="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===s).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,s=this._parsed;return s.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(s).map(([e,t])=>a(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>a(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},d=class{constructor(e){var t,r,s;this._parsed=new Map,this._headers=e;let n=null!=(s=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?s:[];for(let e of Array.isArray(n)?n:function(e){if(!e)return[];var t,r,s,n,i,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,i=!1;l();)if(","===(r=e.charAt(o))){for(s=o,o+=1,l(),n=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(i=!0,o=n,a.push(e.substring(t,s)),t=o):o=s+1}else o+=1;(!i||o>=e.length)&&a.push(e.substring(t,e.length))}return a}(n)){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let s="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===s)}has(e){return this._parsed.has(e)}set(...e){let[t,r,s]=1===e.length?[e[0].name,e[0].value,e[0]]:e,n=this._parsed;return n.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...s})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=a(r);t.append("set-cookie",e)}}(n,this._headers),this}delete(...e){let[t,r,s]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:s,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a).join("; ")}}},6084:(e,t,r)=>{e.exports=r(517)},1945:(e,t,r)=>{Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return s.NextResponse}});let s=r(7054)},8999:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextURL",{enumerable:!0,get:function(){return h}});let s=r(8936),n=r(6345),i=r(9066),a=r(5532),o=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function l(e,t){return new URL(String(e).replace(o,"localhost"),t&&String(t).replace(o,"localhost"))}let u=Symbol("NextURLInternal");class h{constructor(e,t,r){let s,n;"object"==typeof t&&"pathname"in t||"string"==typeof t?(s=t,n=r||{}):n=r||t||{},this[u]={url:l(e,s??n.base),options:n,basePath:""},this.analyze()}analyze(){var e,t,r,n,o;let l=(0,a.getNextPathnameInfo)(this[u].url.pathname,{nextConfig:this[u].options.nextConfig,parseData:!0,i18nProvider:this[u].options.i18nProvider}),h=(0,i.getHostname)(this[u].url,this[u].options.headers);this[u].domainLocale=this[u].options.i18nProvider?this[u].options.i18nProvider.detectDomainLocale(h):(0,s.detectDomainLocale)(null==(t=this[u].options.nextConfig)?void 0:null==(e=t.i18n)?void 0:e.domains,h);let c=(null==(r=this[u].domainLocale)?void 0:r.defaultLocale)||(null==(o=this[u].options.nextConfig)?void 0:null==(n=o.i18n)?void 0:n.defaultLocale);this[u].url.pathname=l.pathname,this[u].defaultLocale=c,this[u].basePath=l.basePath??"",this[u].buildId=l.buildId,this[u].locale=l.locale??c,this[u].trailingSlash=l.trailingSlash}formatPathname(){return(0,n.formatNextPathnameInfo)({basePath:this[u].basePath,buildId:this[u].buildId,defaultLocale:this[u].options.forceLocale?void 0:this[u].defaultLocale,locale:this[u].locale,pathname:this[u].url.pathname,trailingSlash:this[u].trailingSlash})}formatSearch(){return this[u].url.search}get buildId(){return this[u].buildId}set buildId(e){this[u].buildId=e}get locale(){return this[u].locale??""}set locale(e){var t,r;if(!this[u].locale||!(null==(r=this[u].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[u].locale=e}get defaultLocale(){return this[u].defaultLocale}get domainLocale(){return this[u].domainLocale}get searchParams(){return this[u].url.searchParams}get host(){return this[u].url.host}set host(e){this[u].url.host=e}get hostname(){return this[u].url.hostname}set hostname(e){this[u].url.hostname=e}get port(){return this[u].url.port}set port(e){this[u].url.port=e}get protocol(){return this[u].url.protocol}set protocol(e){this[u].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[u].url=l(e),this.analyze()}get origin(){return this[u].url.origin}get pathname(){return this[u].url.pathname}set pathname(e){this[u].url.pathname=e}get hash(){return this[u].url.hash}set hash(e){this[u].url.hash=e}get search(){return this[u].url.search}set search(e){this[u].url.search=e}get password(){return this[u].url.password}set password(e){this[u].url.password=e}get username(){return this[u].url.username}set username(e){this[u].url.username=e}get basePath(){return this[u].basePath}set basePath(e){this[u].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new h(String(this),this[u].options)}}},8612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RequestCookies:function(){return s.RequestCookies},ResponseCookies:function(){return s.ResponseCookies}});let s=r(771)},7054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return u}});let s=r(8999),n=r(9863),i=r(8612),a=Symbol("internal response"),o=new Set([301,302,303,307,308]);function l(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[s,n]of e.request.headers)t.set("x-middleware-request-"+s,n),r.push(s);t.set("x-middleware-override-headers",r.join(","))}}class u extends Response{constructor(e,t={}){super(e,t),this[a]={cookies:new i.ResponseCookies(this.headers),url:t.url?new s.NextURL(t.url,{headers:(0,n.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[a].cookies}static json(e,t){let r=Response.json(e,t);return new u(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!o.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let s="object"==typeof t?t:{},i=new Headers(null==s?void 0:s.headers);return i.set("Location",(0,n.validateURL)(e)),new u(null,{...s,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,n.validateURL)(e)),l(t,r),new u(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),l(e,t),new u(null,{...e,headers:t})}}},9863:(e,t)=>{function r(e){let t=new Headers;for(let[r,s]of Object.entries(e))for(let e of Array.isArray(s)?s:[s])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function s(e){var t,r,s,n,i,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,i=!1;l();)if(","===(r=e.charAt(o))){for(s=o,o+=1,l(),n=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(i=!0,o=n,a.push(e.substring(t,s)),t=o):o=s+1}else o+=1;(!i||o>=e.length)&&a.push(e.substring(t,e.length))}return a}function n(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...s(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function i(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fromNodeOutgoingHttpHeaders:function(){return r},splitCookiesString:function(){return s},toNodeOutgoingHttpHeaders:function(){return n},validateURL:function(){return i}})},9066:(e,t)=>{function r(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getHostname",{enumerable:!0,get:function(){return r}})},8936:(e,t)=>{function r(e,t,r){if(e)for(let i of(r&&(r=r.toLowerCase()),e)){var s,n;if(t===(null==(s=i.domain)?void 0:s.split(":",1)[0].toLowerCase())||r===i.defaultLocale.toLowerCase()||(null==(n=i.locales)?void 0:n.some(e=>e.toLowerCase()===r)))return i}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return r}})},9662:(e,t)=>{function r(e,t){let r;let s=e.split("/");return(t||[]).some(t=>!!s[1]&&s[1].toLowerCase()===t.toLowerCase()&&(r=t,s.splice(1,1),e=s.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return r}})},4128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return i}});let s=r(6713),n=r(4796);function i(e,t,r,i){if(!t||t===r)return e;let a=e.toLowerCase();return!i&&((0,n.pathHasPrefix)(a,"/api")||(0,n.pathHasPrefix)(a,"/"+t.toLowerCase()))?e:(0,s.addPathPrefix)(e,"/"+t)}},6713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return n}});let s=r(1033);function n(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=(0,s.parsePath)(e);return""+t+r+n+i}},3941:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathSuffix",{enumerable:!0,get:function(){return n}});let s=r(1033);function n(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=(0,s.parsePath)(e);return""+r+t+n+i}},6345:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"formatNextPathnameInfo",{enumerable:!0,get:function(){return o}});let s=r(3607),n=r(6713),i=r(3941),a=r(4128);function o(e){let t=(0,a.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,s.removeTrailingSlash)(t)),e.buildId&&(t=(0,i.addPathSuffix)((0,n.addPathPrefix)(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=(0,n.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,i.addPathSuffix)(t,"/"):(0,s.removeTrailingSlash)(t)}},5532:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNextPathnameInfo",{enumerable:!0,get:function(){return a}});let s=r(9662),n=r(8400),i=r(4796);function a(e,t){var r,a;let{basePath:o,i18n:l,trailingSlash:u}=null!=(r=t.nextConfig)?r:{},h={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):u};o&&(0,i.pathHasPrefix)(h.pathname,o)&&(h.pathname=(0,n.removePathPrefix)(h.pathname,o),h.basePath=o);let c=h.pathname;if(h.pathname.startsWith("/_next/data/")&&h.pathname.endsWith(".json")){let e=h.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];h.buildId=r,c="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(h.pathname=c)}if(l){let e=t.i18nProvider?t.i18nProvider.analyze(h.pathname):(0,s.normalizeLocalePath)(h.pathname,l.locales);h.locale=e.detectedLocale,h.pathname=null!=(a=e.pathname)?a:h.pathname,!e.detectedLocale&&h.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(c):(0,s.normalizeLocalePath)(c,l.locales)).detectedLocale&&(h.locale=e.detectedLocale)}return h}},1033:(e,t)=>{function r(e){let t=e.indexOf("#"),r=e.indexOf("?"),s=r>-1&&(t<0||r<t);return s||t>-1?{pathname:e.substring(0,s?r:t),query:s?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r}})},4796:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return n}});let s=r(1033);function n(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,s.parsePath)(e);return r===t||r.startsWith(t+"/")}},8400:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removePathPrefix",{enumerable:!0,get:function(){return n}});let s=r(4796);function n(e,t){if(!(0,s.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}},3607:(e,t)=>{function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[867],()=>r(6317));module.exports=s})();